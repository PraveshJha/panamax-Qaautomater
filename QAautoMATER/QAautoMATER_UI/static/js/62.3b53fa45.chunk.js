"use strict";(self.webpackChunkqaautomater=self.webpackChunkqaautomater||[]).push([[62],{72062:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var a=s(66075),i=s(47313),o=s(40106),n=s(66782),r=s(25399),d=s(70238),l=s(52527),c=s(33516),h=s(46597),p=s(40308),m=s(94209),y=s(1781),u=s(44660),D=s(9327),w=s(94810),R=s(61358),S=s(22748),x=s(97428),b=s(65795),v=s(58390),g=s(72638),j=s(82738),T=s(94118),k=[{dataField:"id",text:"#",headerStyle:{width:"30px"}},{dataField:"key",text:"Key",headerStyle:{width:"200px"},validator:async(e,t,s,a)=>{if(""===await e.trim())return a({valid:!1,message:"key name can not be empty"});var i=await g.Z.jsonArrayGetallKeyValue(x.E.ResponseHeaderData,"key");return await j.Z.isValuePresentInArray(await i,await e)?a({valid:!1,message:"key name can not be duplicate."}):a()}},{dataField:"value",text:"Value",headerStyle:{width:"300px"},validator:async(e,t,s,a)=>""===await e.trim()?a({valid:!1,message:"value can not be empty"}):a()}],E=[{dataField:"id",text:"#",headerStyle:{width:"40px"}},{dataField:"key",text:"Data Key",editable:!1,headerStyle:{width:"170px"},filter:(0,T.DN)({className:"test-classname",placeholder:"Search"})},{dataField:"custom",text:"Parameter",headerStyle:{width:"150px"}}],Z=s(43701),f=(s(34100),s(44),s(80758)),I=s(78944),N=s(16939),M=s.n(N),B=(s(18137),s(10580)),C=s.n(B),H=s(10123),O=s(54805),F=s(50207),P=s(4104),q=s(36620),L=s(46417);class V extends i.Component{constructor(){super(...arguments),this.notificationSystem=i.createRef(),this.state={isPageLoading:!1,allComponentList:x.E.AllComponentList,selectedComponent:x.E.SelectedComponent,isErrorOnComponentName:x.E.IsErrorOnComponentName,allTestId:x.E.AllTestId,selectedTestId:x.E.SelectedTestId,isErrorOnTestId:x.E.IsErrorOnTestId,testName:x.E.TestName,isMockResponseOverride:x.E.IsMockResponseOverride,responseHeaderData:x.E.ResponseHeaderData,selectedRowForResponseHeaderTable:x.E.SelectedRowForResponseHeaderTable,responseBody:x.E.ResponseBody,isDynamicDataButtonDisable:x.E.IsDynamicDataButtonDisable,selectedKeyNameInRequestBody:"",selectedKeyNameSpaceinRequestBody:[],testDataModal:!1,dynamicDataValue:"",selectedRowFromDynamicDataTable:x.E.SelectedRowFromDynamicDataTable},this.componentDidMount=async()=>{window.scrollTo(0,0),await b.Z.apiMockRepoPageLoadData(),this.setState({allComponentList:x.E.AllComponentList}),this.setState({selectedComponent:x.E.SelectedComponent}),this.setState({isErrorOnComponentName:x.E.IsErrorOnComponentName}),this.setState({allTestId:x.E.AllTestId}),this.setState({selectedTestId:x.E.SelectedTestId}),this.setState({isErrorOnTestId:x.E.IsErrorOnTestId}),this.setState({testName:x.E.TestName}),this.setState({isMockResponseOverride:x.E.IsMockResponseOverride}),this.setState({responseHeaderData:x.E.ResponseHeaderData}),this.setState({selectedRowForResponseHeaderTable:x.E.SelectedRowForResponseHeaderTable}),this.setState({responseBody:x.E.ResponseBody}),this.setState({isDynamicDataButtonDisable:x.E.IsDynamicDataButtonDisable}),this.setState({selectedRowFromDynamicDataTable:x.E.SelectedRowFromDynamicDataTable})},this.getNotification=async(e,t)=>{this.notificationSystem.current.addNotification({message:t,level:e,autoDismiss:10})},this.selectComponent=async e=>{var t=await e.target.value;this.setState({isErrorOnComponentName:!1}),this.state.selectedComponent!==await t&&(x.E.SelectedComponent=await t,this.setState({selectedComponent:x.E.SelectedComponent}),this.setState({allTestId:[]}),this.setState({selectedTestId:""}),this.setState({testName:""}),this.setState({isPageLoading:!0}),await b.Z.getTestIdAndTestName(await t),this.setState({isPageLoading:!1}),this.setState({allTestId:x.E.AllTestId}),this.setState({isMockResponseOverride:!1}),x.E.IsMockResponseOverride=!1)},this.selectTestId=async e=>{var t=await e.target.value;if(this.setState({isErrorOnTestId:!1}),this.state.selectedTestId!==await t){x.E.SelectedTestId=await t,this.setState({selectedTestId:x.E.SelectedTestId}),await b.Z.getTestName(await t),this.setState({testName:x.E.TestName}),this.setState({isPageLoading:!0});var s=await b.Z.getMockDataForExistingTestId(x.E.SelectedComponent,x.E.SelectedTestId,x.E.TestName,"Api");if(this.setState({isPageLoading:!1}),Object.keys(s).length>0){this.setState({responseHeaderData:await s.ResponseHeader}),this.setState({responseBody:await s.ResponseBody}),x.E.ResponseBody=await s.ResponseBody,x.E.ResponseHeaderData=await s.ResponseHeader;var a=await s.IsMockResponseOverride;void 0===await a?(this.setState({isMockResponseOverride:!1}),x.E.IsMockResponseOverride=!1):(this.setState({isMockResponseOverride:await a}),x.E.IsMockResponseOverride=await a),x.E.IsMockedTestIdOnServer=!0}else this.setState({responseHeaderData:[{id:1,key:"content-type",value:"application/json"}]}),this.setState({responseBody:{MockedResponseBody:"Paste Mock Response Body here"}}),this.setState({isMockResponseOverride:!1}),x.E.IsMockResponseOverride=!1,x.E.IsMockedTestIdOnServer=!1}},this.changeMockResponseOverrideValue=async e=>{var t=await e.target.checked;this.setState({isMockResponseOverride:await t}),x.E.IsMockResponseOverride=await t},this.toggle=async()=>{this.setState({apiResponseModalView:!1})},this.toggleTestData=async()=>{this.setState({testDataModal:!1})},this.selectRadioButtonFromDynamicDataTable=async(e,t)=>{await t&&(x.E.SelectedRowFromDynamicDataTable=await e.id,this.setState({selectedRowFromDynamicDataTable:await e.id}))},this.updateRequestBodyKeyData=async()=>{var e={},t=Number(this.state.selectedRowFromDynamicDataTable);if(!(t>-1))return await this.getNotification("error","Please select any data key before evaluating the value");var s,a=O.W[Number(t)-1].key,i=O.W[Number(t)-1].custom,o=this.state.selectedKeyNameInRequestBody,n=this.state.selectedKeyNameSpaceinRequestBody;""!==o.trim()&&(e=this.state.responseBody,s=""!==i.trim()?"{{RandomData."+a+"||"+i+"}}":"{{RandomData."+a+"}}",e=await b.Z.updateRequestBody(this.state.responseBody,await n,s),this.setState({responseBody:{}},(()=>{this.setState({responseBody:e})})),x.E.ResponseBody=this.state.responseBody),this.setState({testDataModal:!1}),this.setState({isDynamicDataButtonDisable:!0}),this.setState({selectedRowFromDynamicDataTable:-1}),this.setState({dynamicDataValue:""})},this.evaluateDymanicDataValue=async()=>{var e=Number(this.state.selectedRowFromDynamicDataTable);if(!(e>-1))return await this.getNotification("error","Please select any data key before evaluating the value");var t=O.W[Number(e)-1].key,s=O.W[Number(e)-1].custom,a=await b.Z.getDynamicDataValue(t,s);this.setState({dynamicDataValue:a})},this.selectRadioButtonFromResponseHeaderTable=async(e,t)=>{await t&&(x.E.SelectedRowForResponseHeaderTable=await e.id,this.setState({selectedRowForResponseHeaderTable:await e.id}))},this.addRowInResponseHeaderTable=async e=>{await e.preventDefault();var t=this.state.responseHeaderData,s=t.length+1,a={id:s,key:"",value:""};if(s>1){var i=await t[s-2].key,o=await t[s-2].value;if(""===i.trim()||""===o.trim())return await this.getNotification("error","Please add correct details for key/value in 'Response Header' table")}this.setState({responseHeaderData:[...this.state.responseHeaderData,a]}),void 0===x.E.ResponseHeaderData&&(x.E.ResponseHeaderData=[]),x.E.ResponseHeaderData.push(a)},this.deleteRowFromResponseHeaderTable=async e=>{await e.preventDefault();var t=this.state.responseHeaderData;if(!(Number(this.state.selectedRowForResponseHeaderTable)>0&&Number(this.state.selectedRowForResponseHeaderTable)<=t.length))return await this.getNotification("error","No row is selected for delete from 'Request Header' table");var s=await H.Z.updateTableAfterDeleteRowId(t,this.state.selectedRowForResponseHeaderTable);this.setState({responseHeaderData:await s}),x.E.ResponseHeaderData=await s},this.editRequestBody=async e=>{var t=await e.updated_src;return this.setState({responseBody:await t}),x.E.ResponseBody=await t,this.setState({isDynamicDataButtonDisable:!0})},this.selectKeyInRequestBody=async e=>{var t=await e.name,s=await e.namespace;return s.push(t),this.setState({selectedKeyNameInRequestBody:t}),this.setState({selectedKeyNameSpaceinRequestBody:s}),this.setState({isDynamicDataButtonDisable:!1})},this.openDynamicTestDataModal=async()=>this.setState({testDataModal:!0}),this.saveMockData=async e=>{await e.preventDefault();var t=this.state.selectedComponent,s=this.state.selectedTestId;if(""===t.toString().trim()&&this.setState({isErrorOnComponentName:!0}),""===s.toString().trim()&&this.setState({isErrorOnTestId:!0}),""===t.trim()||""===s.toString().trim())return await this.getNotification("error","Component/TestId can not be blank, Please add the value in highlited field");var a=b.Z.isAllDetailsValidForResponseHeaderTable();if(!await a)return await this.getNotification("error","Response header data is not valid , please add the correct data in Response Header table");var i=await b.Z.isResponseBodyValid();if(!await i)return await this.getNotification("error","Response Body is not valid , Mocked Response body should be in JSON format");this.setState({isPageLoading:!0});var o=await b.Z.saveMockData();return this.setState({isPageLoading:!1}),o?(x.E.IsMockedTestIdOnServer=!0,await this.getNotification("success","Mock data is successfully saved.")):(x.E.IsMockedTestIdOnServer=!1,await this.getNotification("error","Unable to save Mock Data because of "+v.D.ErrorMessage))},this.deleteMockData=async e=>{await e.preventDefault();var t=this.state.selectedComponent,s=this.state.selectedTestId;if(""===t.toString().trim()&&this.setState({isErrorOnComponentName:!0}),""===s.toString().trim()&&this.setState({isErrorOnTestId:!0}),""===t.trim()||""===s.toString().trim())return await this.getNotification("error","Component/TestId can not be blank, Please add the value in highlited field");if(!await x.E.IsMockedTestIdOnServer)return await this.getNotification("error","Mocked Response data is not found on server for testId "+s);this.setState({isPageLoading:!0});var a=await b.Z.deleteMockedDataForTestId();return this.setState({isPageLoading:!1}),a?(x.E.IsMockedTestIdOnServer=!1,this.setState({selectedComponent:""}),this.setState({selectedTestId:""}),this.setState({testName:""}),x.E.SelectedComponent="",x.E.SelectedTestId="",x.E.TestName="",x.E.ResponseBody={MockedResponseBody:"Paste Mock Response Body here"},x.E.ResponseHeaderData=[{id:1,key:"content-type",value:"application/json"}],this.setState({responseBody:x.E.ResponseBody}),this.setState({responseHeaderData:x.E.ResponseHeaderData}),await this.getNotification("success","Mocked Response data is successfully deleted for testId "+s)):(x.E.IsMockedTestIdOnServer=!0,await this.getNotification("error","Unable to delete Mocked Response data because of "+v.D.ErrorMessage))}}render(){const e={mode:"radio",onSelect:this.selectRadioButtonFromResponseHeaderTable,selected:[this.state.selectedRowForResponseHeaderTable]},t={mode:"radio",onSelect:this.selectRadioButtonFromDynamicDataTable,selected:[this.state.selectedRowFromDynamicDataTable],disabled:[0]};return(0,L.jsxs)(a.Z,{className:"MockrepositoryPage",title:"Mock repository",children:[this.state.isPageLoading&&(0,L.jsx)(F.Z,{sentences:P.b,height:"150%",color:"black"}),(0,L.jsxs)(o.Z,{in:!this.state.isPageLoading,children:[(0,L.jsx)(M(),{ref:this.notificationSystem}),(0,L.jsx)(n.Z,{children:(0,L.jsx)(r.Z,{lg:6,md:6,sm:6,xs:12,children:(0,L.jsxs)(d.Z,{children:[(0,L.jsx)(l.Z,{children:(0,L.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:"Choose Api Scripts"})}),(0,L.jsx)(c.Z,{children:(0,L.jsxs)(h.Z,{children:[(0,L.jsxs)(p.Z,{row:!0,children:[(0,L.jsx)(m.Z,{sm:5,children:"Component"}),(0,L.jsx)(r.Z,{children:(0,L.jsxs)(y.Z,{type:"select",invalid:this.state.isErrorOnComponentName,onChange:this.selectComponent.bind(this),name:"component",value:this.state.selectedComponent,children:[(0,L.jsx)("option",{}),(0,L.jsx)(I.Z,{options:this.state.allComponentList})]})})]}),(0,L.jsxs)(p.Z,{row:!0,children:[(0,L.jsx)(m.Z,{sm:5,children:"Test Id"}),(0,L.jsx)(r.Z,{children:(0,L.jsxs)(y.Z,{invalid:this.state.isErrorOnTestId,type:"select",value:this.state.selectedTestId,onChange:this.selectTestId.bind(this),children:[(0,L.jsx)("option",{}),(0,L.jsx)(I.Z,{options:this.state.allTestId})]})})]}),(0,L.jsxs)(p.Z,{row:!0,children:[(0,L.jsx)(m.Z,{sm:5,children:"Test Name"}),(0,L.jsx)(r.Z,{children:(0,L.jsx)(y.Z,{readOnly:!0,type:"input",name:"testName",defaultValue:this.state.testName})})]}),(0,L.jsxs)(p.Z,{row:!0,children:[(0,L.jsx)(m.Z,{sm:10,children:"Do you want the mock response data to be overridden by real data after script execution"}),(0,L.jsx)(r.Z,{children:(0,L.jsx)(y.Z,{type:"checkbox",name:"testName",checked:this.state.isMockResponseOverride,onChange:this.changeMockResponseOverrideValue.bind(this)})})]})]})})]})})}),(0,L.jsx)(n.Z,{children:(0,L.jsx)(r.Z,{lg:12,md:12,sm:12,xs:12,children:(0,L.jsxs)(d.Z,{children:[(0,L.jsx)(l.Z,{children:(0,L.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Mock Response",(0,L.jsxs)(u.Z,{size:"sm",children:[(0,L.jsx)(D.Z,{color:"black",onClick:this.saveMockData.bind(this),children:(0,L.jsx)("small",{children:"Save"})}),(0,L.jsx)(D.Z,{color:"info",onClick:this.deleteMockData.bind(this),children:(0,L.jsx)("small",{children:"Delete"})})]})]})}),(0,L.jsx)(c.Z,{children:(0,L.jsxs)(n.Z,{children:[(0,L.jsx)(r.Z,{lg:6,md:6,sm:6,xs:12,children:(0,L.jsxs)(d.Z,{children:[(0,L.jsx)(l.Z,{children:(0,L.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Response Header",(0,L.jsxs)(u.Z,{size:"sm",children:[(0,L.jsx)(D.Z,{color:"black",onClick:this.addRowInResponseHeaderTable.bind(this),children:(0,L.jsx)("small",{children:"Add"})}),(0,L.jsx)(D.Z,{color:"info",onClick:this.deleteRowFromResponseHeaderTable.bind(this),children:(0,L.jsx)("small",{children:"Delete"})})]})]})}),(0,L.jsx)(c.Z,{children:(0,L.jsx)(r.Z,{style:{overflowX:"auto",maxWidth:"100%"},children:(0,L.jsx)(Z.Z,{keyField:"id",data:this.state.responseHeaderData,columns:k,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,selectRow:e,cellEdit:(0,f.ZP)({mode:"click",blurToSave:!0,afterSaveCell:(e,t,s,a)=>{this.setState({responseHeaderData:x.E.ResponseHeaderData})}})})})})]})}),(0,L.jsx)(r.Z,{lg:6,md:6,sm:6,xs:12,children:(0,L.jsxs)(d.Z,{children:[(0,L.jsx)(l.Z,{children:(0,L.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Response Body",(0,L.jsx)(D.Z,{disabled:this.state.isDynamicDataButtonDisable,color:"black",size:"sm",onClick:this.openDynamicTestDataModal.bind(this),children:(0,L.jsx)("small",{children:"Select Dynamic Data"})})]})}),(0,L.jsx)(c.Z,{children:(0,L.jsx)(r.Z,{children:(0,L.jsx)(C(),{name:!1,collapseStringsAfterLength:30,displayDataTypes:!1,indentWidth:0,enableClipboard:!0,iconStyle:"circle",src:this.state.responseBody,onEdit:this.editRequestBody.bind(this),onSelect:this.selectKeyInRequestBody})})})]})})]})})]})})}),(0,L.jsxs)(w.Z,{returnFocusAfterClose:!0,isOpen:this.state.testDataModal,toggle:this.toggleTestData.bind(this),direction:"end",backdrop:!1,children:[(0,L.jsxs)(R.Z,{toggle:this.toggleTestData.bind(this),children:["Dynamic Data : ",this.state.dynamicDataValue]}),(0,L.jsx)(S.Z,{children:(0,L.jsx)(n.Z,{children:(0,L.jsx)(r.Z,{lg:12,md:12,sm:12,xs:12,children:(0,L.jsxs)(d.Z,{children:[(0,L.jsx)(l.Z,{children:(0,L.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Choose Data",(0,L.jsxs)(u.Z,{size:"sm",children:[(0,L.jsx)(D.Z,{color:"black",onClick:this.evaluateDymanicDataValue.bind(this),children:(0,L.jsx)("small",{children:"Evaluate"})}),(0,L.jsx)(D.Z,{size:"sm",color:"info",onClick:this.updateRequestBodyKeyData.bind(this),children:(0,L.jsx)("small",{children:"Update"})})]})]})}),(0,L.jsx)(c.Z,{children:(0,L.jsx)(r.Z,{style:{overflowX:"auto",maxWidth:"100%"},children:(0,L.jsx)(Z.Z,{keyField:"id",data:O.W,columns:E,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,selectRow:t,filter:(0,T.ZP)(),pagination:(0,q.ZP)(),cellEdit:(0,f.ZP)({mode:"click",blurToSave:!0,nonEditableRows:()=>[0,1,2,3,4,5,6,7,8,9,10]})})})})]})})})})]})]})]})}}const A=V},66075:(e,t,s)=>{s.d(t,{Z:()=>c});s(47313),s(66982);var a=s(99174),i=s(63476),o=s(61583),n=s(35277),r=s(46417);const d=a.ZP.create("page"),l=e=>{let{title:t,breadcrumbs:s,tag:a,className:l,children:c,...h}=e;const p=d.b("px-3",l);return(0,r.jsxs)(a,{className:p,...h,children:[(0,r.jsxs)("div",{className:d.e("header"),children:[t&&"string"===typeof t?(0,r.jsx)(n.Z,{type:"h1",className:d.e("title"),children:t}):t,s&&(0,r.jsxs)(i.Z,{className:d.e("breadcrumb"),children:[(0,r.jsx)(o.Z,{children:"Home"}),s.length&&s.map(((e,t)=>{let{name:s,active:a}=e;return(0,r.jsx)(o.Z,{active:a,children:s},t)}))]})]}),c]})};l.defaultProps={tag:"div",title:""};const c=l},35277:(e,t,s)=>{s.d(t,{Z:()=>d});var a=s(46123),i=s.n(a),o=(s(47313),s(66982),s(46417));const n={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6","display-1":"h1","display-2":"h1","display-3":"h1","display-4":"h1",p:"p",lead:"p",blockquote:"blockquote"},r=e=>{let{tag:t,className:s,type:a,...r}=e;const d=i()({[a]:!!a},s);let l;return l=t||(!t&&n[a]?n[a]:"p"),(0,o.jsx)(l,{...r,className:d})};r.defaultProps={type:"p"};const d=r},18137:()=>{}}]);