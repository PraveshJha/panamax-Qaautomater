"use strict";(self.webpackChunkqaautomater=self.webpackChunkqaautomater||[]).push([[375],{5375:(t,e,a)=>{a.r(e),a.d(e,{default:()=>U});var i=a(6095),s=a(9950),n=a(7176),o=a(6114),r=a(4084),l=a(7537),m=a(9343),d=a(3452),c=a(8156),h=a(8081),w=a(1340),v=a(877),T=a(9708),g=a(9969),D=a(1646),u=a(5488),A={AllCommonTestData:[],SelectedRowFromCommonTestDataTable:"",IsDataValidInCommonTestDataTable:!0,TestDataToAdd:{},DeletedKey:[],AllConfigData:{},EnvironmentList:[],TestDataColumn:[],TestDataTableColumn:[{dataField:"id",text:"#",headerStyle:{width:"50px"}}],TestDataExistingEnvironment:[]},E=a(2539),C=a(6228),f=a(7212),b=(a(7692),a(7319)),y=a(1638),p=a(1312),x=[{dataField:"id",text:"#",headerStyle:{width:"80px"}},{dataField:"key",text:"Data Key",headerStyle:{width:"350px"},validator:async(t,e,a,i)=>{if(""===await t.trim())return i({valid:!1,message:"Data key can not be blank."});if(/[^A-Za-z0-9_-]/gi.test(await t))return i({valid:!1,message:"Data key only accept alphabets."});var s=await y.A.jsonArrayGetallKeyValue(await A.AllCommonTestData,"key");return await p.A.isValuePresentInArray(await s,await t)?i({valid:!1,message:"Data key can not be duplicate."}):i()},filter:(0,b.CA)({placeholder:"Search data key"})}];const S=new class{async testDataPageLoad(){try{var t;t=await E.A.readConfigurationFile("Api"),A.AllConfigData=await t,await this.renderEnvironment(await t),await this.readCommonTestData(),await this.renderTestDataColumn()}catch(e){}}async renderTestDataColumn(){var t=await x,e=await A.TestDataExistingEnvironment;for(let i=0;i<await e.length;i++){let s=await e[i];const n=await t.some((t=>t.dataField===s));if(!await n){var a={dataField:await s,text:await s,headerStyle:{width:"250px"},filter:await(0,b.CA)()};t.push(await a)}}A.TestDataTableColumn=await t}async renderEnvironment(t){try{var e=await t.Environment;if(void 0===await e)A.EnvironmentList=[];else if(0===await e.length)A.EnvironmentList=[];else{var a=[];for(let t=0;t<await e.length;t++){var i=await e[t].name;await a.push(await i)}A.EnvironmentList=await a}}catch(s){A.EnvironmentList=[]}}async saveCommonTestData(){if(C.T.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{var t=await localStorage.getItem("UserSelectedAccount"),e=C.T.backendAPI;"remote"===await C.T.backendServiceAt&&(e=C.T.remoteBackendAPI);var a={};a.keyForAddandUpdate=await A.TestDataToAdd,a.keyForDelete=await A.DeletedKey;var i={Authorization:await C.z.userToken,userEmail:await C.z.userEmail},s=await f.A.post(e+"testdata/project/"+t+"/testingtype/Api",await i,await a),n=await s.data;return C.T.ErrorMessage=await n.errorMessage,await n.isFileSaved}catch(o){C.T.ErrorMessage=await o.message}}async readCommonTestData(){if(C.T.isDemo)A.AllCommonTestData=[{id:1,key:"searchItem",value:"QAautoMATER"}];else{var t=await localStorage.getItem("UserSelectedAccount"),e=C.T.backendAPI;"remote"===await C.T.backendServiceAt&&(e=C.T.remoteBackendAPI);var a={Authorization:await C.z.userToken,userEmail:await C.z.userEmail},i=await f.A.get(e+"testdata/project/"+t+"/testingtype/Api",await a),s=await i.data;if(void 0===s)A.AllCommonTestData=[],A.TestDataExistingEnvironment=[];else{var n=[],o=await s.CommonTestData;if(void 0===await o)A.AllCommonTestData=await n;else{var r=await Object.keys(await o);for(let t=0;t<await r.length;t++){var l=await r[t],m={id:t+1,key:await l},d=await Object.keys(await o[await l]);for(let t=0;t<await d.length;t++){var c=await d[t],h=await o[await l][await c];m[await c]=await h}n.push(await m)}A.AllCommonTestData=await n}var w=await s.TestDataExistingEnvironment;void 0===await w?A.TestDataExistingEnvironment=[]:A.TestDataExistingEnvironment=await w}}}async saveNewEnvironmentInCommonTestData(t){if(C.T.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{var e=await localStorage.getItem("UserSelectedAccount"),a=C.T.backendAPI;"remote"===await C.T.backendServiceAt&&(a=C.T.remoteBackendAPI);var i={};i.envname=await t;var s={Authorization:await C.z.userToken,userEmail:await C.z.userEmail},n=await f.A.post(a+"testdata/project/"+e+"/testingtype/Api/addnewenvironment",await s,await i),o=await n.data;return C.T.ErrorMessage=await o.errorMessage,await o.isFileSaved}catch(r){C.T.ErrorMessage=await r.message}}async deleteEnvironmentInCommonTestData(t){if(C.T.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{var e=await localStorage.getItem("UserSelectedAccount"),a=C.T.backendAPI;"remote"===await C.T.backendServiceAt&&(a=C.T.remoteBackendAPI);var i={};i.envname=await t;var s={Authorization:await C.z.userToken,userEmail:await C.z.userEmail},n=await f.A.post(a+"testdata/project/"+e+"/testingtype/Api/deleteenvironment",await s,await i),o=await n.data;return C.T.ErrorMessage=await o.errorMessage,await o.isFileSaved}catch(r){C.T.ErrorMessage=await r.message}}};var j=a(6502),k=(a(2104),a(248)),N=a(9455),P=a.n(N),L=(a(8486),a(2592)),I=a(3284),F=a(576),M=a(946),R=a(4414);const z={sizePerPage:10,hidePageListOnlyOnePage:!0,sizePerPageList:[{text:"10",value:10},{text:"20",value:20},{text:"50",value:50},{text:"100",value:100},{text:"200",value:200},{text:"500",value:500}]};class V extends s.Component{constructor(){super(...arguments),this.notificationSystem=s.createRef(),this.state={isPageLoading:!1,testDataTableColumn:A.TestDataTableColumn,testDataExistingEnvironment:A.TestDataExistingEnvironment,allCommonTestData:A.AllCommonTestData,selectedRowFromCommonTestDataTable:A.SelectedRowFromCommonTestDataTable,isDataValidInCommonTestDataTable:A.IsDataValidInCommonTestDataTable,newEnvModal:!1,isErroronEnvList:!1,selectedEnvironment:"",environmentList:A.EnvironmentList},this.componentDidMount=async()=>{this.setState({isPageLoading:!0}),await window.scrollTo(0,0),await S.testDataPageLoad(),this.setState({testDataTableColumn:A.TestDataTableColumn}),this.setState({testDataExistingEnvironment:A.TestDataExistingEnvironment}),this.setState({allCommonTestData:await A.AllCommonTestData}),this.setState({selectedRowFromCommonTestDataTable:await A.SelectedRowFromCommonTestDataTable}),this.setState({isDataValidInCommonTestDataTable:await A.IsDataValidInCommonTestDataTable}),this.setState({environmentList:await A.EnvironmentList}),this.setState({isPageLoading:!1})},this.getNotification=async(t,e)=>{this.notificationSystem.current.addNotification({message:e,level:t,autoDismiss:10})},this.selectRadioButtonFromCommonTestDataTable=async(t,e)=>{await e&&(A.SelectedRowFromCommonTestDataTable=await t.id,this.setState({selectedRowFromCommonTestDataTable:await t.id}))},this.addNewData=async t=>{await t.preventDefault();var e=this.state.allCommonTestData;if(e.length>0&&""===e[e.length-1].key.toString().trim())return this.setState({isDataValidInCommonTestDataTable:!1}),await this.getNotification("error","Please add correct details in 'Common Test data' table section");this.setState({isDataValidInCommonTestDataTable:!0});var a={id:e.length+1,key:""},i=this.state.testDataTableColumn;for(let n=0;n<await i.length;n++){var s=await i[n].dataField;"id"!==await s&&"key"!==await s&&(a[await s]="")}this.setState({allCommonTestData:[...this.state.allCommonTestData,a]}),A.AllCommonTestData.push(a)},this.deleteTestData=async t=>{await t.preventDefault();var e=this.state.allCommonTestData;if(0===e.length)return await this.getNotification("error","No information is found under 'Common Test Data' table section");if(!(Number(this.state.selectedRowFromCommonTestDataTable)>0&&Number(this.state.selectedRowFromCommonTestDataTable)<=e.length))return this.setState({isDataValidInCommonTestDataTable:!1}),await this.getNotification("error","No Row is selected in 'Common Test Data' table section");var a=await this.state.allCommonTestData[Number(this.state.selectedRowFromCommonTestDataTable)-1].key;""!==a.toString().trim()&&(await A.DeletedKey.includes(await a)||await A.DeletedKey.push(await a));var i=await E.A.updateRowIdAfterDelete(e,this.state.selectedRowFromCommonTestDataTable);this.setState({allCommonTestData:[]},(()=>{this.setState({allCommonTestData:i})})),A.AllCommonTestData=i,this.setState({selectedRowFromCommonTestDataTable:-1}),A.SelectedRowFromCommonTestDataTable=-1},this.saveCommonTestData=async t=>{await t.preventDefault();var e=this.state.allCommonTestData;if(this.state.isDataValidInCommonTestDataTable){if(e.length>0)if(""===e[e.length-1].key.toString().trim())return await this.getNotification("error","Please add correct details in 'Common Test data' table section");if(0===await Object.keys(await A.TestDataToAdd).length&&0===await A.DeletedKey.length)return await this.getNotification("error","There is no any test data added or updated.");A.AllCommonTestData=e,this.setState({isPageLoading:!0});var a=await S.saveCommonTestData();return this.setState({isPageLoading:!1}),a?await this.getNotification("success","Common test data information is successfully saved."):await this.getNotification("error","Unable to save common test data because of "+C.T.ErrorMessage)}return this.setState({isPageLoading:!1}),await this.getNotification("error","Please add the correct information in 'Common Test Data' table")},this.openNewEnvironmentModal=async t=>{this.setState({isErroronEnvList:!1}),this.setState({newEnvModal:!0}),this.setState({selectedEnvironment:""})},this.toggleNewEnvModal=async()=>{this.setState({isErroronEnvList:!1}),this.setState({newEnvModal:!1})},this.selectEnv=async t=>{this.setState({isErroronEnvList:!1});var e=await t.target.value;this.state.selectedEnvironment!==await e&&this.setState({selectedEnvironment:await e})},this.addNewEnvironment=async t=>{await t.preventDefault();var e=await this.state.selectedEnvironment;if(""===await e)return this.setState({isErroronEnvList:!0}),await this.getNotification("error","Please select environment, if there is no environment please add environment from the configuration page.");var a=await this.state.testDataExistingEnvironment;if(await a.includes(await e))return this.setState({isErroronEnvList:!0}),await this.getNotification("error","Environment is already present in common test data, Please add different environment.");this.setState({isPageLoading:!0});var i=await S.saveNewEnvironmentInCommonTestData(await e);if(this.setState({isPageLoading:!1}),!i)return await this.getNotification("error","Unable to save new environment because of "+C.T.ErrorMessage);this.setState({newEnvModal:!1}),await this.getNotification("success","New Environment "+await e+" is successfully added on Common Test data page."),await new Promise((t=>setTimeout(t,1e3))),await window.location.reload()},this.deleteEnvironment=async t=>{await t.preventDefault();var e=await this.state.selectedEnvironment;if(""===await e)return this.setState({isErroronEnvList:!0}),await this.getNotification("error","Environment name can not be blank.");var a=await this.state.testDataExistingEnvironment;if(!await a.includes(await e))return this.setState({isErroronEnvList:!0}),await this.getNotification("error","Environment is already does not exist in common test data page.");this.setState({isPageLoading:!0});var i=await S.deleteEnvironmentInCommonTestData(await e);if(this.setState({isPageLoading:!1}),!i)return await this.getNotification("error","Unable to delete environment because of "+C.T.ErrorMessage);this.setState({newEnvModal:!1}),await this.getNotification("success","Environment "+await e+" is successfully deleted from Common Test data page."),await new Promise((t=>setTimeout(t,1e3))),await window.location.reload()}}render(){const t={mode:"radio",onSelect:this.selectRadioButtonFromCommonTestDataTable,selected:[this.state.selectedRowFromCommonTestDataTable]};return(0,R.jsxs)(i.A,{className:"testDataPage",title:"Common Test Data",children:[this.state.isPageLoading&&(0,R.jsx)(L.A,{sentences:I.$,height:"200%",color:"black"}),(0,R.jsx)(P(),{ref:this.notificationSystem}),(0,R.jsx)(n.A,{children:(0,R.jsx)(o.A,{lg:12,md:12,sm:12,xs:12,children:(0,R.jsxs)(r.A,{children:[(0,R.jsx)(l.A,{children:(0,R.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Add or Delete Environment",(0,R.jsx)(m.A,{size:"sm",children:(0,R.jsx)(d.A,{color:"black",onClick:this.openNewEnvironmentModal.bind(this),children:(0,R.jsx)("small",{children:"Add New Environment"})})})]})}),(0,R.jsx)(c.A,{children:(0,R.jsxs)(r.A,{children:[(0,R.jsx)(l.A,{children:(0,R.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Add or Update Common Test Data",(0,R.jsxs)(m.A,{size:"sm",children:[(0,R.jsx)(d.A,{color:"black",onClick:this.addNewData.bind(this),children:(0,R.jsx)("small",{children:"Add"})}),(0,R.jsx)(d.A,{color:"info",onClick:this.saveCommonTestData.bind(this),children:(0,R.jsx)("small",{children:"Save"})}),(0,R.jsx)(d.A,{color:"black",onClick:this.deleteTestData.bind(this),children:(0,R.jsx)("small",{children:"Delete"})})]})]})}),(0,R.jsx)(c.A,{children:(0,R.jsx)(c.A,{children:(0,R.jsx)(o.A,{children:(0,R.jsx)(j.A,{keyField:"id",data:this.state.allCommonTestData,columns:this.state.testDataTableColumn,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,selectRow:t,cellEdit:(0,k.Ay)({mode:"click",blurToSave:!0,afterSaveCell:(t,e,a,i)=>{var s=a.key.toString().trim().toUpperCase();if(a.key=s,""!==s){void 0===A.TestDataToAdd[s]&&(A.TestDataToAdd[s]={});var n=Object.keys(a);for(let t=0;t<n.length;t++){var o=n[t];"id"!==o&&"key"!==o&&(A.TestDataToAdd[s][o]=a[o])}}}}),pagination:(0,F.Ay)(z),filter:(0,b.Ay)()})})})})]})})]})})}),(0,R.jsxs)(h.A,{isOpen:this.state.newEnvModal,className:this.props.className,backdrop:"static",children:[this.state.isPageLoading&&(0,R.jsx)(L.A,{sentences:I.$,height:"2000%",color:"black"}),(0,R.jsx)(w.A,{toggle:this.toggleNewEnvModal.bind(this),children:"Add new environment"}),(0,R.jsx)(v.A,{children:(0,R.jsxs)(T.A,{children:[(0,R.jsxs)(g.A,{col:"true",children:[(0,R.jsx)(D.A,{sm:5,children:"Environment*"}),(0,R.jsx)(o.A,{children:(0,R.jsxs)(u.A,{type:"select",name:"environment",invalid:this.state.isErroronEnvList,onChange:this.selectEnv.bind(this),value:this.state.selectedEnvironment,children:[(0,R.jsx)("option",{}),(0,R.jsx)(M.A,{options:this.state.environmentList})]})})]}),(0,R.jsx)(g.A,{row:!0,children:(0,R.jsxs)(m.A,{size:"sm",children:[(0,R.jsx)(d.A,{color:"black",onClick:this.addNewEnvironment.bind(this),children:(0,R.jsx)("small",{children:"Add"})}),(0,R.jsx)(d.A,{color:"info",onClick:this.deleteEnvironment.bind(this),children:(0,R.jsx)("small",{children:"Delete"})})]})})]})})]})]})}}const U=V},6095:(t,e,a)=>{a.d(e,{A:()=>d});a(9950),a(4297);var i=a(3067),s=a(1091),n=a(2464),o=a(2189),r=a(4414);const l=i.Ay.create("page"),m=t=>{let{title:e,breadcrumbs:a,tag:i,className:m,children:d,...c}=t;const h=l.b("px-3",m);return(0,r.jsxs)(i,{className:h,...c,children:[(0,r.jsxs)("div",{className:l.e("header"),children:[e&&"string"===typeof e?(0,r.jsx)(o.A,{type:"h1",className:l.e("title"),children:e}):e,a&&(0,r.jsxs)(s.A,{className:l.e("breadcrumb"),children:[(0,r.jsx)(n.A,{children:"Home"}),a.length&&a.map(((t,e)=>{let{name:a,active:i}=t;return(0,r.jsx)(n.A,{active:i,children:a},e)}))]})]}),d]})};m.defaultProps={tag:"div",title:""};const d=m},2189:(t,e,a)=>{a.d(e,{A:()=>l});var i=a(8738),s=a.n(i),n=(a(9950),a(4297),a(4414));const o={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6","display-1":"h1","display-2":"h1","display-3":"h1","display-4":"h1",p:"p",lead:"p",blockquote:"blockquote"},r=t=>{let{tag:e,className:a,type:i,...r}=t;const l=s()({[i]:!!i},a);let m;return m=e||(!e&&o[i]?o[i]:"p"),(0,n.jsx)(m,{...r,className:l})};r.defaultProps={type:"p"};const l=r},8486:()=>{}}]);