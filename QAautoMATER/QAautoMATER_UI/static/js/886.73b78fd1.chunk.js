"use strict";(self.webpackChunkqaautomater=self.webpackChunkqaautomater||[]).push([[886],{3886:(t,e,a)=>{a.r(e),a.d(e,{default:()=>F});var i=a(66075),s=a(47313),n=a(66782),o=a(25399),r=a(70238),l=a(52527),m=a(44660),d=a(9327),c=a(33516),w=a(23455),h=a(82020),v=a(68642),D=a(46597),T=a(40308),g=a(94209),u=a(1781),E=a(86210),C=a(90431),f=a(58390),b=a(79696),S=a(18887);const x=new class{async testDataPageLoad(){try{var t;t=await C.Z.readConfigurationFile("Mobile"),E.s.AllConfigData=await t,await this.renderEnvironment(await t),await this.readCommonTestData(),await this.renderTestDataColumn()}catch(e){}}async renderTestDataColumn(){var t=await S.ZR,e=await E.s.TestDataExistingEnvironment;for(let i=0;i<await e.length;i++){let s=await e[i];const n=await t.some((t=>t.dataField===s));if(!await n){var a={dataField:await s,text:await s};t.push(await a)}}E.s.TestDataTableColumn=await t}async renderEnvironment(t){try{var e=await t.Environment;if(void 0===await e)E.s.EnvironmentList=[];else if(0===await e.length)E.s.EnvironmentList=[];else{var a=[];for(let t=0;t<await e.length;t++){var i=await e[t].name;await a.push(await i)}E.s.EnvironmentList=await a}}catch(s){E.s.EnvironmentList=[]}}async saveCommonTestData(){if(f.D.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{var t=await localStorage.getItem("UserSelectedAccount"),e=f.D.backendAPI;"remote"===await f.D.backendServiceAt&&(e=f.D.remoteBackendAPI);var a={};a.keyForAddandUpdate=await E.s.TestDataToAdd,a.keyForDelete=await E.s.DeletedKey;var i={Authorization:await f.Q.userToken,userEmail:await f.Q.userEmail},s=await b.Z.post(e+"testdata/project/"+t+"/testingtype/Mobile",await i,await a),n=await s.data;return f.D.ErrorMessage=await n.errorMessage,await n.isFileSaved}catch(o){f.D.ErrorMessage=await o.message}}async readCommonTestData(){if(f.D.isDemo)E.s.AllCommonTestData=[{id:1,key:"searchItem",value:"QAautoMATER"}];else{const h=await localStorage.getItem("UserSelectedAccount");var t=f.D.backendAPI;"remote"===await f.D.backendServiceAt&&(t=f.D.remoteBackendAPI);var e={Authorization:await f.Q.userToken,userEmail:await f.Q.userEmail},a=await b.Z.get(t+"testdata/project/"+h+"/testingtype/Mobile",await e),i=await a.data;if(void 0===i)E.s.AllCommonTestData=[];else{var s=[],n=await i.CommonTestData;if(void 0===await n)E.s.AllCommonTestData=await s;else{var o=await Object.keys(await n);for(let t=0;t<await o.length;t++){var r=await o[t],l={id:t+1,key:await r},m=await Object.keys(await n[await r]);for(let t=0;t<await m.length;t++){var d=await m[t],c=await n[await r][await d];l[await d]=await c}s.push(await l)}E.s.AllCommonTestData=await s}var w=await i.TestDataExistingEnvironment;void 0===await w?E.s.TestDataExistingEnvironment=[]:E.s.TestDataExistingEnvironment=await w}}}async saveNewEnvironmentInCommonTestData(t){if(f.D.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{var e=await localStorage.getItem("UserSelectedAccount"),a=f.D.backendAPI;"remote"===await f.D.backendServiceAt&&(a=f.D.remoteBackendAPI);var i={};i.envname=await t;var s={Authorization:await f.Q.userToken,userEmail:await f.Q.userEmail},n=await b.Z.post(a+"testdata/project/"+e+"/testingtype/Mobile/addnewenvironment",await s,await i),o=await n.data;return f.D.ErrorMessage=await o.errorMessage,await o.isFileSaved}catch(r){f.D.ErrorMessage=await r.message}}async deleteEnvironmentInCommonTestData(t){if(f.D.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{var e=await localStorage.getItem("UserSelectedAccount"),a=f.D.backendAPI;"remote"===await f.D.backendServiceAt&&(a=f.D.remoteBackendAPI);var i={};i.envname=await t;var s={Authorization:await f.Q.userToken,userEmail:await f.Q.userEmail},n=await b.Z.post(a+"testdata/project/"+e+"/testingtype/Mobile/deleteenvironment",await s,await i),o=await n.data;return f.D.ErrorMessage=await o.errorMessage,await o.isFileSaved}catch(r){f.D.ErrorMessage=await r.message}}};var y=a(43701),j=(a(34100),a(44),a(80758)),p=a(16939),k=a.n(p),A=(a(18137),a(50207)),Z=a(4104),N=a(94118),P=a(36620),L=a(78944),M=a(46417);class I extends s.Component{constructor(){super(...arguments),this.notificationSystem=s.createRef(),this.state={isPageLoading:!1,testDataTableColumn:E.s.TestDataTableColumn,testDataExistingEnvironment:E.s.TestDataExistingEnvironment,allCommonTestData:E.s.AllCommonTestData,selectedRowFromCommonTestDataTable:E.s.SelectedRowFromCommonTestDataTable,isDataValidInCommonTestDataTable:E.s.IsDataValidInCommonTestDataTable,newEnvModal:!1,isErroronEnvList:!1,selectedEnvironment:"",environmentList:E.s.EnvironmentList},this.componentDidMount=async()=>{this.setState({isPageLoading:!0}),window.scrollTo(0,0),await x.testDataPageLoad(),this.setState({testDataTableColumn:E.s.TestDataTableColumn}),this.setState({testDataExistingEnvironment:E.s.TestDataExistingEnvironment}),this.setState({allCommonTestData:E.s.AllCommonTestData}),this.setState({selectedRowFromCommonTestDataTable:E.s.SelectedRowFromCommonTestDataTable}),this.setState({isDataValidInCommonTestDataTable:E.s.IsDataValidInCommonTestDataTable}),this.setState({environmentList:await E.s.EnvironmentList}),this.setState({isPageLoading:!1})},this.getNotification=async(t,e)=>{this.notificationSystem.current.addNotification({message:e,level:t,autoDismiss:10})},this.selectRadioButtonFromCommonTestDataTable=(t,e)=>{e&&(E.s.SelectedRowFromCommonTestDataTable=t.id,this.setState({selectedRowFromCommonTestDataTable:t.id}))},this.addNewData=async t=>{await t.preventDefault();var e=this.state.allCommonTestData;if(e.length>0&&""===e[e.length-1].key.toString().trim())return this.setState({isDataValidInCommonTestDataTable:!1}),await this.getNotification("error","Please add correct details in 'Common Test data' table section");this.setState({isDataValidInCommonTestDataTable:!0});var a={id:e.length+1,key:""},i=this.state.testDataTableColumn;for(let n=0;n<await i.length;n++){var s=await i[n].dataField;"id"!==await s&&"key"!==await s&&(a[await s]="")}this.setState({allCommonTestData:[...this.state.allCommonTestData,a]}),E.s.AllCommonTestData.push(a)},this.deleteTestData=async t=>{await t.preventDefault();var e=this.state.allCommonTestData;if(0===e.length)return await this.getNotification("error","No information is found under 'Common Test Data' table section");if(!(Number(this.state.selectedRowFromCommonTestDataTable)>0&&Number(this.state.selectedRowFromCommonTestDataTable)<=e.length))return this.setState({isDataValidInCommonTestDataTable:!1}),await this.getNotification("error","No Row is selected in 'Common Test Data' table section");var a=await this.state.allCommonTestData[Number(this.state.selectedRowFromCommonTestDataTable)-1].key;""!==a.toString().trim()&&(await E.s.DeletedKey.includes(await a)||await E.s.DeletedKey.push(await a));var i=await C.Z.updateRowIdAfterDelete(e,this.state.selectedRowFromCommonTestDataTable);this.setState({allCommonTestData:[]},(()=>{this.setState({allCommonTestData:i})})),E.s.AllCommonTestData=i,this.setState({selectedRowFromCommonTestDataTable:-1}),E.s.SelectedRowFromCommonTestDataTable=-1},this.saveCommonTestData=async t=>{await t.preventDefault();var e=this.state.allCommonTestData;if(this.state.isDataValidInCommonTestDataTable){if(e.length>0)if(""===e[e.length-1].key.toString().trim())return await this.getNotification("error","Please add correct details in 'Common Test data' table section");if(0===await Object.keys(await E.s.TestDataToAdd).length&&0===await E.s.DeletedKey.length)return await this.getNotification("error","There is no any test data added or updated.");E.s.AllCommonTestData=e,this.setState({isPageLoading:!0});var a=await x.saveCommonTestData();return this.setState({isPageLoading:!1}),a?await this.getNotification("success","Common test data information is successfully saved."):await this.getNotification("error","Unable to save common test data because of "+f.D.ErrorMessage)}return this.setState({isPageLoading:!1}),await this.getNotification("error","Please add the correct information in 'Common Test Data' table")},this.openNewEnvironmentModal=async t=>{this.setState({isErroronEnvList:!1}),this.setState({newEnvModal:!0}),this.setState({selectedEnvironment:""})},this.toggleNewEnvModal=async()=>{this.setState({isErroronEnvList:!1}),this.setState({newEnvModal:!1})},this.selectEnv=async t=>{this.setState({isErroronEnvList:!1});var e=await t.target.value;this.state.selectedEnvironment!==await e&&this.setState({selectedEnvironment:await e})},this.addNewEnvironment=async t=>{await t.preventDefault();var e=await this.state.selectedEnvironment;if(""===await e)return this.setState({isErroronEnvList:!0}),await this.getNotification("error","Please select environment, if there is no environment please add environment from the configuration page.");var a=await this.state.testDataExistingEnvironment;if(await a.includes(await e))return this.setState({isErroronEnvList:!0}),await this.getNotification("error","Environment is already present in common test data, Please add different environment.");this.setState({isPageLoading:!0});var i=await x.saveNewEnvironmentInCommonTestData(await e);if(this.setState({isPageLoading:!1}),!i)return await this.getNotification("error","Unable to save new environment because of "+f.D.ErrorMessage);this.setState({newEnvModal:!1}),await this.getNotification("success","New Environment "+await e+" is successfully added on Common Test data page."),await new Promise((t=>setTimeout(t,1e3))),await window.location.reload()},this.deleteEnvironment=async t=>{await t.preventDefault();var e=await this.state.selectedEnvironment;if(""===await e)return this.setState({isErroronEnvList:!0}),await this.getNotification("error","Environment name can not be blank.");var a=await this.state.testDataExistingEnvironment;if(!await a.includes(await e))return this.setState({isErroronEnvList:!0}),await this.getNotification("error","Environment is already does not exist in common test data page.");this.setState({isPageLoading:!0});var i=await x.deleteEnvironmentInCommonTestData(await e);if(this.setState({isPageLoading:!1}),!i)return await this.getNotification("error","Unable to delete environment because of "+f.D.ErrorMessage);this.setState({newEnvModal:!1}),await this.getNotification("success","Environment "+await e+" is successfully deleted from Common Test data page."),await new Promise((t=>setTimeout(t,1e3))),await window.location.reload()}}render(){const t={mode:"radio",onSelect:this.selectRadioButtonFromCommonTestDataTable,selected:[this.state.selectedRowFromCommonTestDataTable]};return(0,M.jsxs)(i.Z,{className:"testDataPage",title:"Common Test Data",children:[this.state.isPageLoading&&(0,M.jsx)(A.Z,{sentences:Z.b,height:"200%",color:"black"}),(0,M.jsx)(k(),{ref:this.notificationSystem}),(0,M.jsx)(n.Z,{children:(0,M.jsx)(o.Z,{lg:12,md:12,sm:12,xs:12,children:(0,M.jsxs)(r.Z,{children:[(0,M.jsx)(l.Z,{children:(0,M.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Add or Delete Environment",(0,M.jsx)(m.Z,{size:"sm",children:(0,M.jsx)(d.Z,{color:"black",onClick:this.openNewEnvironmentModal.bind(this),children:(0,M.jsx)("small",{children:"Add New Environment"})})})]})}),(0,M.jsx)(c.Z,{children:(0,M.jsxs)(r.Z,{children:[(0,M.jsx)(l.Z,{children:(0,M.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Add or Update Common Test Data",(0,M.jsxs)(m.Z,{size:"sm",children:[(0,M.jsx)(d.Z,{color:"black",onClick:this.addNewData.bind(this),children:(0,M.jsx)("small",{children:"Add"})}),(0,M.jsx)(d.Z,{color:"info",onClick:this.saveCommonTestData.bind(this),children:(0,M.jsx)("small",{children:"Save"})}),(0,M.jsx)(d.Z,{color:"black",onClick:this.deleteTestData.bind(this),children:(0,M.jsx)("small",{children:"Delete"})})]})]})}),(0,M.jsx)(c.Z,{children:(0,M.jsx)(c.Z,{children:(0,M.jsx)(o.Z,{children:(0,M.jsx)(y.Z,{keyField:"id",data:this.state.allCommonTestData,columns:this.state.testDataTableColumn,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,selectRow:t,cellEdit:(0,j.ZP)({mode:"click",blurToSave:!0,afterSaveCell:(t,e,a,i)=>{var s=a.key.toString().trim().toUpperCase();if(a.key=s,""!==s){void 0===E.s.TestDataToAdd[s]&&(E.s.TestDataToAdd[s]={});var n=Object.keys(a);for(let t=0;t<n.length;t++){var o=n[t];"id"!==o&&"key"!==o&&(E.s.TestDataToAdd[s][o]=a[o])}}}}),pagination:(0,P.ZP)(),filter:(0,N.ZP)()})})})})]})})]})})}),(0,M.jsxs)(w.Z,{isOpen:this.state.newEnvModal,className:this.props.className,backdrop:"static",children:[this.state.isPageLoading&&(0,M.jsx)(A.Z,{sentences:Z.b,height:"2000%",color:"black"}),(0,M.jsx)(h.Z,{toggle:this.toggleNewEnvModal.bind(this),children:"Add new environment"}),(0,M.jsx)(v.Z,{children:(0,M.jsxs)(D.Z,{children:[(0,M.jsxs)(T.Z,{col:"true",children:[(0,M.jsx)(g.Z,{sm:5,children:"Environment*"}),(0,M.jsx)(o.Z,{children:(0,M.jsxs)(u.Z,{type:"select",name:"environment",invalid:this.state.isErroronEnvList,onChange:this.selectEnv.bind(this),value:this.state.selectedEnvironment,children:[(0,M.jsx)("option",{}),(0,M.jsx)(L.Z,{options:this.state.environmentList})]})})]}),(0,M.jsx)(T.Z,{row:!0,children:(0,M.jsxs)(m.Z,{size:"sm",children:[(0,M.jsx)(d.Z,{color:"black",onClick:this.addNewEnvironment.bind(this),children:(0,M.jsx)("small",{children:"Add"})}),(0,M.jsx)(d.Z,{color:"info",onClick:this.deleteEnvironment.bind(this),children:(0,M.jsx)("small",{children:"Delete"})})]})})]})})]})]})}}const F=I},18137:()=>{}}]);