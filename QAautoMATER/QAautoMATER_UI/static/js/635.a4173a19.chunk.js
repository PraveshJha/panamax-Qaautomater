"use strict";(self.webpackChunkqaautomater=self.webpackChunkqaautomater||[]).push([[635],{39635:(a,t,e)=>{e.d(t,{Z:()=>u});var i=e(84660),r=e(58390),s=e(54805),o=e(10123),w=e(92234),n=e(72638),l=e(90431),c=e(79696),m=e(3814),d=e(18887);const u=new class{async loadTestScriptPage(){try{await this.closeDebuggerWindow(),await this.initializeTestScriptPage(),await this.getallORDATA(),await this.getallCommonDATA(),await this.renderComponent(),await this.setLocator();var a=await o.Z.GetAllMobileActions();i.K.UIActionList=await a,await this.getPageFunctionList();try{if(void 0!==await localStorage.getItem("testId")&&null!==await localStorage.getItem("testId")){var t=await JSON.parse(await localStorage.getItem(await localStorage.getItem("testId")));i.K.SelectedComponent=await t.component,i.K.IsValidComponentName=!0,i.K.IsValidTestId=!0,i.K.IsValidTestName=!0,i.K.TestId=await t.testId,i.K.TestName=await t.testName,i.K.ListOfTestSteps=await t.listOfTestSteps,i.K.DependentCustomFunction=await t.dependentCustomFunction,i.K.TestDataTableHeader=await t.testDataTableHeader,i.K.ListOfTestScriptData=await t.listOfTestScriptData,i.K.ExternalTestSteps=await t.manualTestSteps}}catch(e){}try{await localStorage.removeItem("testId"),await localStorage.removeItem(await localStorage.removeItem("testId"))}catch(e){}i.K.ListOfTestTools=await this.GetTestToolFromConfigurationPage()}catch(e){}}async initializeTestScriptPage(){var a={},t="",e="";if(!await r.D.isDemo){a=await l.Z.readConfigurationFile("Mobile"),i.K.AllConfigData=await a;try{t=await a.DefaultSelectedEnvironment,e=await a.Environment,await e.length>0?(""!==await t&&void 0!==await t||(t=await e[0].name),i.K.SelectedEnvironment=await t):i.K.SelectedEnvironment=""}catch(c){t="",e=[]}""!==await t&&(i.K.CommonTestDataEnvironment=await t,i.K.SelectedEnv=await t,i.K.SelectedEnvironment=await t,i.K.DefualtEnvironment=await t);var s=[];for(let a=0;a<await e.length;a++){var o=await e[a].name;s.push(await o)}i.K.EnvironmentList=await s;var w=await a.DefaultExecutionPlatform;void 0===await w&&(w="Android"),i.K.SelectedScreenOption=await w;var n=await a.DefaultRunAtOption;void 0===await n&&(n="Server"),i.K.SelectedRunAtOption=await n,void 0===await m.M.RunAtOptionList||0===await m.M.RunAtOptionList.length?i.K.RunAtOptionList=["Server"]:i.K.RunAtOptionList=m.M.RunAtOptionList,await this.setDeviceInforMation(await w,await n,await a)}}async getallORDATA(){if(await r.D.isDemo);else try{var a=await localStorage.getItem("UserSelectedAccount"),t=await r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(t=await r.D.remoteBackendAPI);var e={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},s=await c.Z.get(t+"or/project/"+await a+"/testingtype/Mobile",await e),o=await s.data;i.K.AllORData=await o;var w=await Object.keys(await o);i.K.AllORKey=[];for(let a=0;a<await w.length;a++){var n=await w[a];i.K.TestScriptORData[await n]=i.K.AllORData[await n],i.K.AllORKey.push(await n)}}catch(l){r.D.ErrorMessage=await l.message}}async getallCommonDATA(){if(await r.D.isDemo);else try{var a=await localStorage.getItem("UserSelectedAccount"),t=await r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(t=await r.D.remoteBackendAPI);var e={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},s=await c.Z.get(t+"testdata/project/"+a+"/testingtype/Mobile",await e),o=await s.data,w=await o.TestDataExistingEnvironment;void 0===await w&&(w=[]),i.K.AllEnvironmentInCommonTestData=await w;var n=await this.renderCommonTestDataColumn(await w);if(await n.length>2)for(let a=2;a<await n.length;a++)n[a].headerStyle={width:"160px"};i.K.CommonTestDataTableColumn=await n;var l=await o.CommonTestData;void 0===await l&&(l={});var m=await Object.keys(await l),d=[],u={};for(let a=0;a<await m.length;a++){var p=await m[a],g={id:a+1,key:await p},v=await Object.keys(await l[await p]);for(let a=0;a<await v.length;a++){var D=await v[a],f=await l[await p][await D];g[await D]=await f}d.push(await g),u[await p]=await l[await p]}i.K.AllCommonTestData=await d,i.K.CommonTestDataWithKeyValue=await u;var h=[];for(let a=0;a<await d.length;a++)h.push(a+1);i.K.CommonTestDataNonEditableRows=await h}catch(S){r.D.ErrorMessage=await S.message}}async renderCommonTestDataColumn(a){var t=await d.ZR;for(let i=0;i<await a.length;i++){let r=await a[i];const s=await t.some((a=>a.dataField===r));if(!await s){var e={dataField:await r,text:await r};t.push(await e)}}return await t}async getDynamicDataValue(a,t){return await s.Z.getValueFromDynamicData(await a,await t)}async getTestScriptListFromComponent(a){var t=await o.Z.getUITestScriptIDfromallComponent(await a,"Mobile");i.K.AllTestId=await t.allTestId,i.K.AllTestIdWithName=await t.testIdWithName}async renderComponent(){if(r.D.isDemo)i.K.AllComponentList=["LandingPage","SignIn","ProductList","ShoppingCart","BookingSummary"];else try{var a=await localStorage.getItem("UserSelectedAccount"),t=await r.D.backendAPI;"remote"===r.D.backendServiceAt&&(t=await r.D.remoteBackendAPI);var e={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},s=await c.Z.get(t+"components/project/"+a+"/testingtype/Mobile",await e);i.K.AllComponentList=await s.data}catch(o){r.D.ErrorMessage=await o.message}}async getAllUITestAttribute(){if(r.D.isDemo)i.K.TestName="My Test case Name is "+await w.Z.getFirstName();else try{var a=i.K.TestId,t=await n.Z.getIndexForMatchingKeyValueinJsonArray(i.K.AllTestIdWithName,"testid",a);i.K.TestName=i.K.AllTestIdWithName[t].testname;var e=await o.Z.getTestDetailsInJson(i.K.SelectedComponent,a,i.K.TestName,"Mobile");i.K.ListOfTestSteps=await e.allsteps,i.K.DependentCustomFunction=await e.dependentpage,i.K.TestDataTableHeader=await e.testdatacolumn,i.K.ListOfTestScriptData=await e.testdataset;var s=await e.lastUpdatedBy;if(void 0!==await s)i.K.LastActivityMessage=await s;else{s=await e.createdBy;void 0===await s?i.K.LastActivityMessage="Test scripts do not have the lastUpdated tag. This feature is available from release version UI (1.0.67) and API (1.0.84). After this release, any test script created or updated will display this information.":i.K.LastActivityMessage=await s}}catch(l){console.log(await l)}}async isDataFilledforDependendentPage(){try{var a=await i.K.DependentCustomFunction;if(0===a.length)return!0;for(let e=0;e<await a.length;e++){var t=await a[e].customfunction;if(""===await t||void 0===await t)return!1}return!0}catch(e){return!1}}async setupDebuggerWindow(){if(r.D.isDemo);else try{var a=await localStorage.getItem("UserSelectedAccount"),t=await i.K.SelectedScreenOption;i.K.DebuggerPlatform=await t;var e=await i.K.SelectedDevice,s={Step:"",Status:"",Message:"",Command:"NA"};s.Step="Launch Mobile Application ";var o=r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(o=r.D.remoteBackendAPI);var w={};w.platform=await t,w.device=await e,w.environment=await i.K.SelectedEnvironment,w.userEmail=await r.Q.userEmail,w.projectName=await a;var n=await i.K.SelectedRunAtOption;void 0===await n&&(n="Server"),w.runAt=await n;var l={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},m=await c.Z.post(o+"mobiledebug/debuggerwindow",await l,await w),d=await m.data;s.Status=await d.status,s.Message=await d.message,s.Command=await d.command,i.K.DebugDetails=await s;var u="data:image/png;base64, "+await d.screenshot;i.K.StepScreenshot=await u}catch(p){r.D.ErrorMessage=await p.message}}async getPageFunctionList(){var a={},t={};if(r.D.isDemo)i.K.ListOfPageFunction=["Given I am on Home page","Given I am on Product List page","Given I am on Product Information page"],i.K.PageFunctionNameListWithLabelandValue=[{label:"Custom function 1",value:"Custom function 1"}];else try{var e=await localStorage.getItem("UserSelectedAccount"),s=r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(s=r.D.remoteBackendAPI),a={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},t=await c.Z.get(s+"customfunction/project/"+e+"/testingtype/Mobile/custom/Page",await a);var o=await t.data;i.K.ListOfPageFunction=await o;var w=[];for(let a=0;a<await o.length;a++){var n={label:"",value:""};n.label=await o[a],n.value=await o[a],w.push(await n)}i.K.PageFunctionNameListWithLabelandValue=await w}catch(l){r.D.ErrorMessage=await l.message}}async isDataFilledforTestStepTable(a){for(let i=0;i<await a.length;i++){var t=await a[i].stepdefinition.toString().trim(),e=await a[i].action.toString().trim();if(""===t||""===e)return!1}return!0}async getCustomFunctionArguments(a){if(r.D.isDemo)return["args.USERNAME"];try{var t=await localStorage.getItem("UserSelectedAccount"),e=r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(e=r.D.remoteBackendAPI);var i={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},s=await c.Z.get(e+"customfunction/project/"+t+"/testingtype/Mobile/custom/Page/name/"+await a,await i),o=await s.data;return await o.argumentlist}catch(w){r.D.ErrorMessage=await w.message}}async saveTestScriptData(){var a={},t={},e={},s=!0;if(r.D.isDemo)return await new Promise((a=>setTimeout(a,3e3))),!0;try{await localStorage.removeItem("testId"),await localStorage.removeItem(await i.K.TestId)}catch(v){}try{var o=await localStorage.getItem("UserSelectedAccount"),w=r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(w=r.D.remoteBackendAPI);var n,l={},m=await this.getListOfNewElementFromTestSteps(i.K.ListOfTestSteps);n=await m.newelement,l.allsteps=i.K.ListOfTestSteps;var d=i.K.DependentCustomFunction;if(await d.length>0)for(let a=0;a<await d.length;a++){var u=await d[a].customfunction,p=await typeof await u;"object"===await p&&(d[a].customfunction=await u.label)}if(l.dependentpage=await d,l.testdatacolumn=i.K.TestDataTableHeader,l.testdataset=i.K.ListOfTestScriptData,await Object.keys(n).length>0){(a={}).keyForAddandUpdate=await n,t={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},e=await c.Z.post(w+"or/project/"+o+"/testingtype/Mobile",await t,await a);var g=await e.data;if(!g.isFileSaved)return void(r.D.ErrorMessage=await g.errorMessage)}return await Object.keys(i.K.TestDataToAdd).length>0&&((a={}).keyForAddandUpdate=await i.K.TestDataToAdd,t={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},e=await c.Z.post(w+"testdata/project/"+o+"/testingtype/Mobile",await t,await a),!(s=await e.data).isFileSaved)?void(r.D.ErrorMessage=await s.errorMessage):(await l.dependentpage.length>0&&""===await l.dependentpage[0].parameter&&((a={}).pagename=await l.dependentpage,a.elementtag=await i.K.AllConfigData.ELEMENTTAGDATA,t={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},e=await c.Z.post(await w+"customfunction/project/"+o+"/testingtype/Mobile/createpagefunctionfromtestscript",await t,await a)),t={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},e=await c.Z.post(w+"testscripts/component/"+i.K.SelectedComponent+"/testId/"+i.K.TestId.trim()+"@"+i.K.TestName.trim()+"/project/"+o+"/testingtype/Mobile",await t,await l),s=await e.data,r.D.ErrorMessage=await s.errorMessage,await s.isFileSaved)}catch(v){r.D.ErrorMessage=await v.message}}async getListOfNewElementFromTestSteps(a){var t={},e={};for(let s=0;s<await a.length;s++){var r=await a[s].element.toString().trim().toUpperCase();""!==r&&void 0!==await i.K.TestScriptORData[r]&&(e[await r]=await i.K.TestScriptORData[await r])}return t.newelement=await e,t}async DeleteTestScriptFromServer(a,t,e){if(r.D.isDemo)return await new Promise((a=>setTimeout(a,3e3))),!0;try{var i=await localStorage.getItem("UserSelectedAccount"),s=await r.D.backendAPI;"remote"===r.D.backendServiceAt&&(s=await r.D.remoteBackendAPI);var o={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},w=await c.Z.delete(s+"testscripts/component/"+a+"/testId/"+t+"@"+e+"/project/"+i+"/testingtype/Mobile",await o),n=await w.data;return r.D.ErrorMessage=await n.errorMessage,await n.isFileDeleted}catch(l){r.D.ErrorMessage=await l.message}}async renameTestName(){if(r.D.isDemo)return await new Promise((a=>setTimeout(a,3e3))),!0;try{var a=await localStorage.getItem("UserSelectedAccount"),t=i.K.SelectedComponent,e=i.K.TestId,s=i.K.TestName.trim(),o=i.K.NewName.trim(),w=r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(w=r.D.remoteBackendAPI);var n={oldName:e+"@"+s,newName:e+"@"+o},l={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},m=await c.Z.post(w+"testscripts/component/"+t+"/project/"+a+"/testingtype/Mobile/rename",await l,await n),d=await m.data;return r.D.ErrorMessage=await d.errorMessage,await d.isFileSaved}catch(u){r.D.ErrorMessage=await u.message}}async closeDebuggerWindow(){if(r.D.isDemo);else try{var a=await localStorage.getItem("UserSelectedAccount"),t=r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(t=r.D.remoteBackendAPI);var e={};e.userEmail=await r.Q.userEmail,e.projectName=await a;var s=await i.K.AllConfigData.DefaultRunAtOption;void 0===await s&&(s="Server"),e.runAt=await s;var o={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},w=await c.Z.post(t+"mobiledebug/debuggerwindow/quit",await o,await e),n=await w.data;return await n}catch(l){r.D.ErrorMessage=await l.message}}async debugSingleTestStep(a,t,e){if(r.D.isDemo);else try{var s=await localStorage.getItem("UserSelectedAccount"),o=r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(o=r.D.remoteBackendAPI);var w={};w.isPageFunction=await e,w.userEmail=await r.Q.userEmail,w.testStep=await a,w.projectName=await s,w.orData=await this.setUpAllOrData(),w.commonTestData=await i.K.CommonTestDataWithKeyValue,w.testSpecificData=await t,w.platform=await i.K.DebuggerPlatform,w.commonTestDataEnvironment=await i.K.CommonTestDataEnvironment;var n={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},l=await c.Z.post(o+"mobiledebug/debugstep",await n,await w),m=await l.data,d={Step:"",Status:"",Message:"",Command:"NA"};if(await e)d.Step=await a[0].customfunction;else{d.Step=await a.stepdefinition;var u=await await a.element;if(""!==await u&&void 0!==await u)try{var p=await m.primaryLocatorProperty,g=await m.primaryLocator;""!==await g&&void 0!==await g&&""!==await p&&void 0!==await p&&(i.K.AllORData[await u].locator=await g,i.K.AllORData[await u].locatorproperty=await p);var v=await m.secondaryXPath;""!==await v&&void 0!==await v&&(i.K.AllORData[await u].alternatexpath=await v)}catch(f){}}d.Status=await m.status,d.Message=await m.message,d.Command=await m.command,i.K.DebugDetails=await d;var D="data:image/png;base64, "+await m.screenshot;i.K.StepScreenshot=await D}catch(f){r.D.ErrorMessage=await f.message}}async setUpAllOrData(){var a=i.K.AllORData,t=await this.getListOfNewElementFromTestSteps(i.K.ListOfTestSteps),e=await t.newelement,r=await Object.keys(await e);if(await r.length>0)for(let i=0;i<await r.length;i++){var s=await r[i];a[await s]={},a[await s]=await e[await s]}return await a}async getactionandElementFromTestStep(a){if(r.D.isDemo)return await new Promise((a=>setTimeout(a,3e3))),!0;try{var t=await r.D.backendAPI;"remote"===r.D.backendServiceAt&&(t=await r.D.remoteBackendAPI);var e={};e.step=await a;var s=await i.K.AllConfigData.ELEMENTTAGDATA;void 0===await s&&(s=m.M.AllConfigData.ELEMENTTAGDATA),e.elementtag=await s;var o={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail,account:r.D.SelectedProject},w=await c.Z.post(t+"mobileaistep/step",await o,await e),n=await w.data;return await n}catch(l){r.D.ErrorMessage=await l.message}}async generateAutomatedStep(){if(r.D.isDemo)return await new Promise((a=>setTimeout(a,3e3))),!0;try{var a=[],t=1,e=await r.D.backendAPI;"remote"===r.D.backendServiceAt&&(e=await r.D.remoteBackendAPI);var s={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail,account:r.D.SelectedProject},o=await i.K.ExternalTestSteps,w=await o.split("\n"),n=!1;(await o.includes("Scenario Outline:")||await o.includes("Scenario:"))&&(n=!0);var l=0;await n&&(l=await this.getTestNameFromBDDFile(await w),l=await this.getGivenPageName(await w,Number(await l)+1),l=Number(await l)+1);for(let r=await l;r<await w.length;r++){for(var m=await w[r].toLowerCase().trim(),d=await w[r].replace(/[^0-9A-Z ,._ __'"@/]+/gi,"");await d.match(/^\d/);)d=await d.substring(1);if(d=await d.trim(),await d.toString().startsWith(".")&&(d=await d.substring(1)),""!==await d.trim()&&await!m.startsWith("example")&&await!m.includes("|")){var u=await c.Z.post(e+"aistep/breakSteps",await s,{step:await d}),p=await u.data;for(let r=0;r<await p.length;r++){d=await p[r];var g={id:await t,stepdefinition:await d,action:"",element:"",value:"",isreporting:"Yes"},v=await c.Z.post(e+"mobileaistep/step",await s,{step:await d,elementtag:await i.K.AllConfigData.ELEMENTTAGDATA}),D=await v.data,f=await D.actionName,h=await D.actionvalue;if(""!==await f){var S=await D.orLogicalName.trim().toUpperCase(),A=await D.primaryLocator,K=await D.primaryLocatorProperty,T=D.iosLocatorName,y=D.iOSLocatorProperty,b=await D.secondaryXPath,E=i.K.TestScriptORData[await S],k={locator:A,locatorproperty:K,ioslocator:T,ioslocatorproperty:y,alternatexpath:b};void 0===await E&&(i.K.AllORData[await S]={},i.K.AllORData[await S]=await k,i.K.TestScriptORData[await S]={},i.K.TestScriptORData[await S]=await k,i.K.AllORKey.includes(await S)||i.K.AllORKey.push(await S)),g.action=await f,g.element=await S,g.value=await h}await a.push(await g),t=Number(await t)+1}}}return await n&&await this.setTestDataHEaderAndColumn(await w),await a.length>0?(i.K.ListOfTestSteps=await a,!0):(r.D.ErrorMessage="No valid test step found.",!1)}catch(I){r.D.ErrorMessage=await I.message}}async getTestNameFromBDDFile(a){var t=0;for(let r=0;r<await a.length;r++){var e=await a[r];if(await e.includes("Scenario Outline:")){i.K.TestName=await e.split("Scenario Outline:")[1].replace(/[^0-9A-Z ]+/gi,"").trim(),i.K.IsValidTestName=!0,t=await r;break}if(await e.includes("Scenario:")){i.K.TestName=await e.split("Scenario:")[1].replace(/[^0-9A-Z ]+/gi,"").trim(),i.K.IsValidTestName=!0,t=await r;break}}return await t}async getGivenPageName(a,t){var e=0;for(let w=await t;w<await a.length;w++){var r=await a[w].replace(/[^0-9A-Z ]+/gi,""),s=await a[w].replace(/[^0-9A-Z ]+/gi,"").toLowerCase();if(await s.startsWith("given ")){i.K.DependentCustomFunction=[];var o={id:1,customfunction:await r,parameter:""};i.K.DependentCustomFunction.push(await o),e=await w;break}}return await e}async setTestDataHEaderAndColumn(a){var t=0;for(let i=await 0;i<await a.length;i++){var e=await a[i].toLowerCase().trim();if(await e.startsWith("example")){t=await i;break}}try{var r=[],s=await a[Number(await t)+1].split("|");for(let a=0;a<await s.length;a++){var o=await s[a].trim();""!==await o&&await r.push(await o.toUpperCase())}i.K.TestDataTableHeader=[];i.K.TestDataTableHeader.push(await{dataField:"id",text:"#",headerStyle:{width:"20px"}});for(let a=0;a<await r.length;a++){var w={dataField:await r[await a],text:await r[await a],headerStyle:{width:"150px"}};i.K.TestDataTableHeader.push(await w)}var n=[],l=0;for(let e=await Number(await t)+2;e<await a.length;e++){var c=await a[e].trim().split("|"),m=[];for(let a=0;a<await c.length;a++)if(""!==await c[a]){var d=await await c[a].trim();m.push(await d)}if(await m.length>0){l=await Number(l)+1;var u={id:await l};for(let a=0;a<await r.length;a++){var p=await r[await a],g=await m[await a];u[await p]=await g}n.push(await u)}}i.K.ListOfTestScriptData=await n}catch(v){}return await t}async uploadFileToServer(a){if(await r.D.isDemo)return await new Promise((a=>setTimeout(a,3e3))),!0;try{var t=await localStorage.getItem("UserSelectedAccount"),e=await r.D.backendAPI;"remote"===r.D.backendServiceAt&&(e=await r.D.remoteBackendAPI);let w=new FormData;w.append("file",await a);var i={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail,"Content-Type":"multipart/form-data"},s=await c.Z.post(e+"fileupload/project/"+await t,await i,await w),o=await s.data;return await o}catch(w){r.D.ErrorMessage=await w.message}}async GetTestToolFromConfigurationPage(){var a=["QaBunch"];if(void 0===await i.K.AllConfigData)return await a;if(void 0===await i.K.AllConfigData.Tools)return await a;var t=await i.K.AllConfigData.Tools;for(let e=0;e<await t.length;e++)a.push(await t[e].tool);return await a}async getTestInformationFromTestTool(a,t){var e={},i={},s={};if(r.D.isDemo)return await new Promise((a=>setTimeout(a,3e3))),!0;try{var o=await localStorage.getItem("UserSelectedAccount"),w=r.D.backendAPI;"remote"===await r.D.backendServiceAt&&(w=r.D.remoteBackendAPI);var n={};return n.testtool=await a.trim(),n.testid=await t.trim(),e={Authorization:await r.Q.userToken,userEmail:await r.Q.userEmail},i=await c.Z.post(w+"testtooltestinfo/project/"+o+"/gettestinfo",await e,await n),s=await i.data,r.D.ErrorMessage=await s.errorMessage,await s}catch(l){r.D.ErrorMessage=await l.message}}async setLocator(){if(r.D.isDemo)i.K.AllLocatorList=["id","name","xpath","text","class"];else{var a=await i.K.AllConfigData.Locator;void 0===await a?i.K.AllLocatorList=["id","name","xpath","text","class"]:i.K.AllLocatorList=await a}}async setDeviceInforMation(a,t,e){if(r.D.isDemo)switch(a){case"Android":i.K.DeviceList=["One plus 9R","Pixel 3"],i.K.SelectedDevice="Pixel 3";break;case"iOS":i.K.DeviceList=["iPhone 12","iPhone 14"],i.K.SelectedDevice="iPhone 14";break;default:i.K.DeviceList=[],i.K.SelectedDevice=""}else{var s=[];if("Server"===await t||"Client"===await t){var o=await e.Emulator;if(void 0!==await o)for(let t=0;t<await o.length;t++)await o[t].platform===await a&&s.push(await o[t].name);await s.length>0?(i.K.DeviceList=await s,i.K.SelectedDevice=await s[0]):(i.K.DeviceList=[],i.K.SelectedDevice="")}else await this.setDeviceDetailsForCloud(await e,await t,await a)}}async setDeviceDetailsForCloud(a,t,e){try{var r;if(r=await a.ExecutionCapabilities[await t],void 0===await r)i.K.DeviceList=[],i.K.SelectedDevice="";else{var s=await r.hostname;if(void 0===await s||"providehostname"===await s)return i.K.DeviceList=[],void(i.K.SelectedDevice="");var o=await r.user;if(void 0===await o||"provideusername"===await o)return i.K.DeviceList=[],void(i.K.SelectedDevice="");var w=await r.key;if(void 0===await w||"providePassword"===await w)return i.K.DeviceList=[],void(i.K.SelectedDevice="")}var n=await r[await e];if(void 0===await n)return i.K.DeviceList=[],void(i.K.SelectedDevice="");var l=await Object.keys(await n);if(0===await l.length)return i.K.DeviceList=[],void(i.K.SelectedDevice="");r=[];for(let a=0;a<await l.length;a++){var c=await l[a];r.push(await c)}i.K.DeviceList=await r,i.K.SelectedDevice=await r[0]}catch(m){return i.K.DeviceList=[],void(i.K.SelectedDevice="")}}async isEnvironmentPresentInCommonTestData(a,t){for(let i=0;i<await a.length;i++){var e=await a[i].dataField;if(await t===await e)return!0}return!1}async getArgsNameFromLocator(a){try{var t=[];if(await a.toString().toLowerCase().includes("+args.")){for(var e=/ARGS\.(\w+)/g;null!==(i=e.exec(await a));)t.push(i[1]);for(e=/Args\.(\w+)/g;null!==(i=e.exec(await a));)t.push(i[1]);var i;for(e=/args\.(\w+)/g;null!==(i=e.exec(await a));)t.push(i[1])}else{if(!await a.toString().toLowerCase().includes("args."))return t;var r=await a.split("ARGS.")[1];if(void 0===await r){r=await a.split("Args.")[1];if(void 0===await r)r=await a.split("args.")[1]}t.push(await r)}}catch(s){}return await t}async generateTestStepsFromMobileRecorder(a,t,e){var r={isSuccess:!0,errorMessage:"",allSteps:[]},s=[];try{var o=1;void 0!==await e&&""!==await e&&-1!==await e||(o=await a.length,e=await await a.length);const r=await t.split("\n");var n=await r.length;for(let a=0;a<await n;a++){var l=await r[a];if(await this.isElementDefintionStepInRecordedCode(await l)){var c=await this.getLocatorandLocatorProertyFromRecordedStep(await l);if(""!==await c.locator&&""!==await c.locatorproperty){var m=c.locator.replace(/[^a-zA-Z]/g,"");switch(m=await m.toLowerCase(),await m){case"resourceid":m="resource-id";case"accessibilityid":m="accessibility-id"}var d=await c.locatorproperty,u=await c.locatorproperty,p="";if("xpath"===await m){if(await d.includes("@text="))p=await await d.split("@text=")[1];else{let a=await d.match(/"([^"]+)"/);a&&a[1]&&(p=a[1])}if(await p.includes("/")&&(p=await p.split("/")[1]),p=await p.replace(/[^a-zA-Z]/g,""),p=await p.toUpperCase(),d=await d.replace(/\\/g,""),u=await u.replace(/\\/g,""),await u.toString().includes("//android")){var g=await u.indexOf("[");u=await u.startsWith("(")?"(//*"+u.substring(await g):"//*"+u.substring(await g)}else if(await d.toString().includes("//XCUIE")){g=await d.indexOf("[");d=await d.startsWith("(")?"(//*"+d.substring(await g):"//*"+d.substring(await g)}}else p=await d.includes("/")?await d.split("/")[1]:await d,p=await p.replace(/[^a-zA-Z]/g,""),p=await p.toUpperCase();if(""!==await p&&void 0!==await p&&null!==await p){var v=i.K.TestScriptORData[await p];if(await v){var D=await v.locatorproperty;if(await D!==await d){p=await p+(await w.Z.getString(4)).toUpperCase();f={locator:await m,locatorproperty:await d,ioslocator:await m,ioslocatorproperty:await u,alternatexpath:"",alternatexpathios:""};i.K.AllORData[p]={},i.K.AllORData[p]=await f,i.K.TestScriptORData[p]={},i.K.TestScriptORData[p]=await f,i.K.AllORKey.includes(p)||i.K.AllORKey.push(p)}}else{var f={locator:await m,locatorproperty:await d,ioslocator:await m,ioslocatorproperty:await u,alternatexpath:"",alternatexpathios:""};i.K.AllORData[p]={},i.K.AllORData[p]=await f,i.K.TestScriptORData[p]={},i.K.TestScriptORData[p]=await f,i.K.AllORKey.includes(p)||i.K.AllORKey.push(p)}var h="",S=await r[a+1],A=await r[a+1];if(""!==await A){let a=await A.match(/\.(.*?)\(/);if(await a&&await a[1]&&(A=await a[1],""!==await A&&void 0!==await A)){var K=A.replace(/[^a-zA-Z]/g,"");switch(A=await A.toLowerCase(),await A){case"addvalue":case"sendkeys":case"sendkey":const a=/\(([^)]+)\)/;var T=await S.match(a);h=await T?await T[1].replace(/"/g,""):"",K="Type";break;case"click":K="Click";break;case"executescript":K="ExecuteScript";var y=/\(([^)]+)\)/;T=await S.match(await y);h=await T?T[1]:"";break;default:K=""}if(""!==await K){o=await o+1;var b={id:await o,stepdefinition:"",action:"",element:"",value:"{}",isreporting:""},E=await K+" "+p;if(b.stepdefinition=await E,b.action=await K,b.element=await p,""!==await h){var k={valuetobesend:await h};k=JSON.stringify(await k),b.value=await k}s.push(await b)}}}}}a+=1}else{S=await l,h="";if(A=await l,""!==await A){let a=await A.match(/\.(.*?)\(/);if(await a&&await a[1]&&(A=await a[1],""!==await A)){K=A.replace(/[^a-zA-Z]/g,"");switch(A=await A.toLowerCase(),await A){case"addvalue":case"sendkeys":case"sendkey":const a=/\(([^)]+)\)/;T=await S.match(a);h=await T?T[1].replace(/"/g,""):"",K="Type";break;case"click":K="Click";break;case"executescript":K="ExecuteScript";y=/\(([^)]+)\)/,T=await S.match(await y);h=await T?T[1]:"";break;default:K=""}if(""!==await K){o=await o+1;b={id:await o,stepdefinition:"",action:"",element:"",value:"{}",isreporting:"Y"},E=await K+" "+p;if(b.stepdefinition=await E,b.action=await K,""!==await h){k={valuetobesend:await h};k=JSON.stringify(await k),b.value=await k}s.push(await b)}}}}}}catch(P){r.isSuccess=!1,r.errorMessage="Unable to generate test step because of "+await P.toString()}if(await r.isSuccess){var I=[];for(let t=0;t<await Number(await e);t++)I[t]=await a[t];for(let a=0;a<await s.length;a++){var L=await s[a];I.push(await L)}var C=await I.length;o=0;for(let t=Number(await e);t<await a.length;t++){o=await o+1;var O=await a[t];O.id=await o+await C,I.push(await O)}r.allSteps=await I}return r}async isElementDefintionStepInRecordedCode(a){var t=await a.toLowerCase();return!!(await t.includes("driver.$")||await t.includes("findelement")||await t.includes("find_element"))}async getLocatorandLocatorProertyFromRecordedStep(a){var t={locator:"",locatorproperty:""};try{var e=await a.indexOf("("),i=await a.lastIndexOf(")");if(-1!==await e&&-1!==await i){const w=await a.substring(await e+1,await i);var r=await w.indexOf(":");if(-1!==await r){var s=await w.substring(0,await r);await s.toString().startsWith('"')&&(s=await s.substring(1));var o=await w.substring(await r+1);await o.toString().endsWith('"')&&(o=await o.substring(0,await o.length-1)),t.locator=await s,t.locatorproperty=await o}}}catch(w){}return await t}}}}]);