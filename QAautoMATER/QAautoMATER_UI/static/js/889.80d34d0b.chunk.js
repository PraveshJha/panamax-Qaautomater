"use strict";(self.webpackChunkqaautomater=self.webpackChunkqaautomater||[]).push([[889],{7584:(e,t,a)=>{a.d(t,{E:()=>i});var i={AllORTableData:[],SelectedRowFromORTable:"",IsDataValidInORTable:!0,NewAndUpdatedElement:{},DeletedKey:[],AllLocatorList:[],ElementNameForLog:"",ElementMessageForLogs:"",ElementLogTableData:[],ElementNameForDependency:"",ElementMessageForDependency:"",ElementDependencyTableData:[]}},9889:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var i=a(6095),s=a(9950),l=a(9343),r=a(3452),o=a(7176),n=a(6114),d=a(4084),c=a(7537),h=a(8156),m=a(8081),p=a(1340),g=a(877),w=a(9708),b=a(7584),y=a(5199),D=a(6228),u=a(7212),S=a(5033);const T=new class{async orPageLoad(){try{await this.readORData(),b.E.AllConfigData=await S.A.readConfigurationFile("Mobile"),await this.setLocator()}catch(e){}}async saveORData(){if(D.T.isDemo)return await new Promise((e=>setTimeout(e,3e3))),!0;try{const l=await localStorage.getItem("UserSelectedAccount");var e=D.T.backendAPI;"remote"===await D.T.backendServiceAt&&(e=D.T.remoteBackendAPI);var t={};t.keyForAddandUpdate=await b.E.NewAndUpdatedElement,t.keyForDelete=await b.E.DeletedKey;var a={Authorization:await D.z.userToken,userEmail:await D.z.userEmail},i=await u.A.post(e+"or/project/"+l+"/testingtype/Mobile",await a,await t),s=await i.data;return D.T.ErrorMessage=await s.errorMessage,await s.isFileSaved}catch(l){D.T.ErrorMessage=await l.message}}async readORData(){if(D.T.isDemo)b.E.AllORTableData=[{id:1,name:"inputUserName",locator:"Name",locatorproperty:"username",alternatexpath:""}];else{const c=await localStorage.getItem("UserSelectedAccount");var e=D.T.backendAPI;"remote"===await D.T.backendServiceAt&&(e=D.T.remoteBackendAPI);var t={Authorization:await D.z.userToken,userEmail:await D.z.userEmail},a=await u.A.get(e+"or/project/"+c+"/testingtype/Mobile",await t),i=await a.data;if(void 0===i)b.E.AllORTableData=[];else{var s=[],l=await Object.keys(await i),r=1;for(let e=0;e<await l.length;e++){var o=await l[e],n=await i[await o].createdby;void 0===await n&&(n="NA");var d={id:await r,name:o,issame:await i[await o].issame,locator:await i[await o].locator,locatorproperty:await i[await o].locatorproperty,ioslocator:await i[await o].ioslocator,ioslocatorproperty:await i[await o].ioslocatorproperty,alternatexpath:await i[await o].alternatexpath,createdby:await n};s.push(await d),r=Number(r)+1}b.E.AllORTableData=await s}}}async setLocator(){var e=[];if(e.push({label:"Id",value:"id"}),e.push({label:"Name",value:"class"}),e.push({label:"Xpath",value:"text"}),e.push({label:"LinkText",value:"class"}),D.T.isDemo)b.E.AllLocatorList=await e;else{var t=await b.E.AllConfigData.Locator;if(void 0===await t)b.E.AllLocatorList=await e;else{var a=[];for(let e=0;e<await t.length;e++){var i=await t[e].trim();a.push({label:await i,value:await i})}b.E.AllLocatorList=await a}}}async getsLogsFromtheServer(e){var t={message:"No Information Available.",tableData:[]};if(D.T.isDemo)return await t;try{var a={};a.element=await e;var i=await localStorage.getItem("UserSelectedAccount"),s=D.T.backendAPI;"remote"===await D.T.backendServiceAt&&(s=D.T.remoteBackendAPI);var l={Authorization:await D.z.userToken,userEmail:await D.z.userEmail},r=await u.A.post(s+"or/project/"+i+"/testingtype/Mobile/getlogsoftheelement",await l,await a);return await r.data}catch(o){}return await t}async getDependencyDataFortheServer(e){var t={message:"No Information Available",tableData:[]};if(D.T.isDemo)return await t;try{var a={};a.element=await e;var i=await localStorage.getItem("UserSelectedAccount"),s=D.T.backendAPI;"remote"===await D.T.backendServiceAt&&(s=D.T.remoteBackendAPI);var l={Authorization:await D.z.userToken,userEmail:await D.z.userEmail},r=await u.A.post(s+"or/project/"+i+"/testingtype/Mobile/getdepoftheelement",await l,await a);return await r.data}catch(o){}return await t}async deleteElementFromtheServer(){var e={message:"No Information Available."};if(D.T.isDemo)return await e;try{var t=await localStorage.getItem("UserSelectedAccount"),a=D.T.backendAPI;"remote"===await D.T.backendServiceAt&&(a=D.T.remoteBackendAPI);var i={Authorization:await D.z.userToken,userEmail:await D.z.userEmail},s=await u.A.delete(a+"or/project/"+t+"/testingtype/Mobile/removeunusedelement",await i);return await s.data}catch(l){}return await e}};var A=a(6502),x=(a(2104),a(7692),a(248)),E=a(9455),v=a.n(E),f=(a(8486),a(2592)),R=a(3284),L=a(7319),F=a(576),O=a(1638),j=a(1312),N=a(8795),k=a.n(N),M=a(4414);class P extends s.Component{constructor(){super(...arguments),this.notificationSystem=s.createRef(),this.state={isPageLoading:!1,allORTableData:b.E.AllORTableData,selectedRowFromORTable:b.E.SelectedRowFromORTable,isDataValidInORTable:b.E.IsDataValidInORTable,isLogsModalOpen:!1,elementNameForLog:b.E.ElementNameForLog,elementMessageForLogs:b.E.ElementMessageForLogs,elementLogTableData:b.E.ElementLogTableData,isDepScannerModalOpen:!1,elementNameForDependency:b.E.ElementNameForDependency,elementMessageForDependency:b.E.ElementMessageForDependency,elementDependencyTableData:b.E.ElementDependencyTableData},this.componentDidMount=async()=>{window.scrollTo(0,0),this.setState({isPageLoading:!0}),await T.orPageLoad(),this.setState({isPageLoading:!1}),this.setState({allORTableData:b.E.AllORTableData}),this.setState({selectedRowFromORTable:b.E.SelectedRowFromORTable}),this.setState({isDataValidInORTable:b.E.IsDataValidInORTable}),this.setState({isDataValidInORTable:b.E.IsDataValidInORTable}),this.setState({elementNameForLog:b.E.ElementNameForLog}),this.setState({elementMessageForLogs:b.E.ElementMessageForLogs}),this.setState({elementLogTableData:b.E.ElementLogTableData}),this.setState({elementNameForDependency:b.E.ElementNameForDependency}),this.setState({elementMessageForDependency:b.E.ElementMessageForDependency}),this.setState({elementDependencyTableData:b.E.ElementDependencyTableData})},this.getNotification=async(e,t)=>{this.notificationSystem.current.addNotification({message:t,level:e,autoDismiss:10})},this.selectRadioButtonFromORTable=(e,t)=>{t&&(b.E.SelectedRowFromORTable=e.id,this.setState({selectedRowFromORTable:e.id}))},this.addNewData=async e=>{await e.preventDefault();var t=this.state.allORTableData;if(t.length>0){var a=t[t.length-1].name,i=t[t.length-1].locator,s=t[t.length-1].locatorproperty;if(""===a.toString().trim()||""===i.toString().trim()||""===s.toString().trim())return this.setState({isDataValidInORTable:!1}),await this.getNotification("error","Please add correct details in 'Object Repository' table section")}this.setState({isDataValidInORTable:!0});var l={id:t.length+1,name:"",locator:"",locatorproperty:"",ioslocator:"",ioslocatorproperty:"",alternatexpath:"",createdby:await D.z.userEmail};this.setState({allORTableData:[...this.state.allORTableData,l]}),b.E.AllORTableData.push(l)},this.deleteTestData=async e=>{await e.preventDefault();var t=this.state.allORTableData;if(0===t.length)return await this.getNotification("error","No information is found under 'Object Repository' table section");if(!(Number(this.state.selectedRowFromORTable)>0&&Number(this.state.selectedRowFromORTable)<=t.length))return this.setState({isDataValidInCommonTestDataTable:!1}),await this.getNotification("error","No Row is selected in 'Object Repository' table section");var a=await this.state.allORTableData[Number(this.state.selectedRowFromORTable)-1].name;""!==a.toString().trim()&&(await b.E.DeletedKey.includes(await a)||await b.E.DeletedKey.push(await a));var i=await y.A.updateRowIdAfterDelete(t,this.state.selectedRowFromORTable);this.setState({allORTableData:[]},(()=>{this.setState({allORTableData:i})})),b.E.AllORTableData=i},this.saveCommonTestData=async e=>{await e.preventDefault();var t=this.state.allORTableData;if(this.state.isDataValidInORTable){if(t.length>0){var a=t[t.length-1].name,i=t[t.length-1].locator,s=t[t.length-1].locatorproperty,l=t[t.length-1].ioslocator,r=t[t.length-1].ioslocatorproperty;if(""===a.toString().trim()||""===i.toString().trim()||""===s.toString().trim()||""===l.toString().trim()||""===r.toString().trim())return await this.getNotification("error","Please add correct details in 'Object Repository' table section")}if(0===await Object.keys(await b.E.NewAndUpdatedElement).length&&0===await b.E.DeletedKey.length)return await this.getNotification("error","There is no any locator added or updated.");b.E.AllORTableData=t,this.setState({isPageLoading:!0});var o=await T.saveORData();return this.setState({isPageLoading:!1}),o?await this.getNotification("success","Object Repository information is successfully saved."):await this.getNotification("error","Unable to save Object Repository information because of "+D.T.ErrorMessage)}return this.setState({isPageLoading:!1}),await this.getNotification("error","Please add the correct information in 'Object Repository' table")},this.toggleLogsModal=async()=>{this.setState({isLogsModalOpen:!1})},this.getLogsForElement=async e=>{if(""!==await e){this.setState({elementNameForLog:await e}),b.E.ElementNameForLog=await e,this.setState({elementMessageForLogs:""}),b.E.ElementMessageForLogs="",this.setState({elementLogTableData:[]}),b.E.ElementLogTableData=[],this.setState({isPageLoading:!0});var t=await T.getsLogsFromtheServer(await e);this.setState({elementMessageForLogs:await t.message}),this.setState({elementLogTableData:await t.tableData}),b.E.ElementMessageForLogs=await t.message,b.E.ElementLogTableData=await t.tableData,this.setState({isPageLoading:!1}),this.setState({isLogsModalOpen:!0})}},this.depScanner=async e=>{if(""!==await e){this.setState({elementNameForDependency:await e}),b.E.ElementNameForDependency=await e,this.setState({elementMessageForDependency:""}),b.E.ElementMessageForDependency="",this.setState({elementDependencyTableData:[]}),b.E.ElementDependencyTableData=[],this.setState({isPageLoading:!0});var t=await T.getDependencyDataFortheServer(await e);this.setState({elementMessageForDependency:await t.message}),this.setState({elementDependencyTableData:await t.tableData}),b.E.ElementMessageForDependency=await t.message,b.E.ElementDependencyTableData=await t.tableData,this.setState({isPageLoading:!1}),this.setState({isDepScannerModalOpen:!0})}},this.toggleDepScannerModal=async()=>{this.setState({isDepScannerModalOpen:!1})},this.deleteUnusedElement=async e=>{if(await e.preventDefault(),0===this.state.allORTableData.length)return await this.getNotification("error","No element is found under 'Object Repository' table section");this.setState({isPageLoading:!0});var t=await T.deleteElementFromtheServer();this.setState({isPageLoading:!1}),await this.getNotification("success",await t.message),await new Promise((e=>setTimeout(e,4e3))),await window.location.reload()}}render(){const e={mode:"radio",onSelect:this.selectRadioButtonFromORTable,selected:[this.state.selectedRowFromORTable]},t=[{dataField:"id",text:"#",headerStyle:{width:"60px"}},{dataField:"name",text:"Name",headerStyle:{width:"250px"},validator:async(e,t,a,i)=>{if(""===await e.trim())return i({valid:!1,message:"Name can not be blank."});if(/[^A-Za-z0-9_.-]/gi.test(await e))return i({valid:!1,message:"Name only accept alphabets."});var s=await O.A.jsonArrayGetallKeyValue(this.state.allORTableData,"name");return await j.A.isValuePresentInArray(s,await e)?i({valid:!1,message:"Name can not be duplicate."}):i()},filter:(0,L.CA)({placeholder:"Search By Name"})},{dataField:"locator",text:"Android Locator",headerStyle:{width:"150px"},validator:async(e,t,a,i)=>""===await e.trim()?i({valid:!1,message:"Locator can not be blank"}):i(),editor:{type:x.ZU.SELECT,getOptions:e=>{setTimeout((()=>{e(b.E.AllLocatorList)}),0)}}},{dataField:"locatorproperty",text:"Android Locator Property",headerStyle:{width:"350px"},validator:async(e,t,a,i)=>""===await e.trim()?i({valid:!1,message:"Locator Property can not be blank"}):i(),filter:(0,L.CA)({placeholder:"Search By Locator Property"})},{dataField:"ioslocator",text:"iOS Locator",headerStyle:{width:"150px"},validator:async(e,t,a,i)=>""===await e.trim()?i({valid:!1,message:"Locator can not be blank"}):i(),editor:{type:x.ZU.SELECT,getOptions:e=>{setTimeout((()=>{e(b.E.AllLocatorList)}),0)}}},{dataField:"ioslocatorproperty",text:"iOS Locator Property",headerStyle:{width:"350px"},validator:async(e,t,a,i)=>""===await e.trim()?i({valid:!1,message:"Locator Property can not be blank"}):i(),filter:(0,L.CA)({placeholder:"Search By Locator Property"})},{dataField:"createdby",text:"Created By",headerStyle:{width:"250px"},editable:!1,filter:(0,L.CA)({placeholder:"Search By Created by"})},{dataField:"logs",text:"Logs",headerStyle:{width:"100px"},editable:!1,formatter:(e,t,a,i)=>(0,M.jsx)(l.A,{size:"sm",children:(0,M.jsx)(r.A,{color:"black",onClick:()=>this.getLogsForElement(t.name),children:(0,M.jsx)("small",{children:"View Logs"})})})},{dataField:"dep",text:"Dependency",headerStyle:{width:"150px"},editable:!1,formatter:(e,t,a,i)=>(0,M.jsx)(l.A,{size:"sm",children:(0,M.jsx)(r.A,{color:"info",onClick:()=>this.depScanner(t.name),children:(0,M.jsx)("small",{children:"Scan"})})})},{dataField:"alternatexpath",text:"Alternate Xpath",headerStyle:{width:"350px"},validator:async(e,t,a,i)=>i(),hidden:!0}],a=[{dataField:"id",text:"#",headerStyle:{width:"60px"}},{dataField:"update",text:"Updated By",headerStyle:{width:"300px"}},{dataField:"date",text:"Date & Time",headerStyle:{width:"300px"}},{dataField:"new",text:"Change History",headerStyle:{width:"250px"},formatter:(e,t)=>{var a=t.new;return"object"!==typeof a&&(a={}),(0,M.jsx)("div",{style:{whiteSpace:"normal",textOverflow:"clip",maxWidth:"100%",wordBreak:"break-word"},children:(0,M.jsx)(k(),{name:!1,collapseStringsAfterLength:30,displayDataTypes:!1,indentWidth:0,enableClipboard:!0,iconStyle:"circle",collapsed:!0,src:a})})}}];return(0,M.jsxs)(i.A,{className:"objectRepPage",title:"Object Repository",children:[this.state.isPageLoading&&(0,M.jsx)(f.A,{sentences:R.$,height:"250%",color:"black"}),(0,M.jsx)(v(),{ref:this.notificationSystem}),(0,M.jsx)(o.A,{children:(0,M.jsx)(n.A,{lg:12,md:12,sm:12,xs:12,children:(0,M.jsxs)(d.A,{children:[(0,M.jsx)(c.A,{children:(0,M.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Mobile Element Attribute",(0,M.jsxs)(l.A,{size:"sm",children:[(0,M.jsx)(r.A,{color:"black",onClick:this.addNewData.bind(this),children:(0,M.jsx)("small",{children:"Add"})}),(0,M.jsx)(r.A,{color:"info",onClick:this.saveCommonTestData.bind(this),children:(0,M.jsx)("small",{children:"Save"})}),(0,M.jsx)(r.A,{color:"black",onClick:this.deleteTestData.bind(this),children:(0,M.jsx)("small",{children:"Delete"})}),D.z.isSuperAdmin&&(0,M.jsx)(r.A,{onClick:this.deleteUnusedElement.bind(this),color:"secondary",style:{marginLeft:"10px"},children:(0,M.jsx)("small",{children:"Remove unused elements"})})]})]})}),(0,M.jsx)(h.A,{children:(0,M.jsx)(h.A,{children:(0,M.jsx)(n.A,{children:(0,M.jsx)(A.A,{keyField:"id",data:this.state.allORTableData,columns:t,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,selectRow:e,cellEdit:(0,x.Ay)({mode:"click",blurToSave:!0,afterSaveCell:(e,t,a,i)=>{"name"===i.dataField&&(a.name=a.name.toString().trim().toUpperCase());var s=Number(a.id)-1,l=this.state.allORTableData[s].name,r={};void 0!==l&&(r.locator=this.state.allORTableData[s].locator,r.locatorproperty=this.state.allORTableData[s].locatorproperty,r.ioslocator=this.state.allORTableData[s].ioslocator,r.ioslocatorproperty=this.state.allORTableData[s].ioslocatorproperty,r.alternatexpath=this.state.allORTableData[s].alternatexpath,void 0===b.E.NewAndUpdatedElement[l.toString().toUpperCase()]&&(b.E.NewAndUpdatedElement[l.toString().toUpperCase()]={}),b.E.NewAndUpdatedElement[l.toString().toUpperCase()]=r)}}),pagination:(0,F.Ay)(),filter:(0,L.Ay)()})})})})]})})}),(0,M.jsxs)(m.A,{size:"xl",isOpen:this.state.isLogsModalOpen,className:this.props.className,backdrop:"static",children:[this.state.isPageLoading&&(0,M.jsx)(f.A,{sentences:R.$,height:"2000%",color:"black"}),(0,M.jsxs)(p.A,{toggle:this.toggleLogsModal.bind(this),children:["Logs for Element ",this.state.elementNameForLog]}),(0,M.jsx)(g.A,{children:(0,M.jsx)(w.A,{children:(0,M.jsx)(o.A,{children:(0,M.jsx)(n.A,{lg:12,md:12,sm:12,xs:12,children:(0,M.jsxs)(d.A,{children:[(0,M.jsx)(c.A,{children:(0,M.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:this.state.elementMessageForLogs})}),(0,M.jsx)(h.A,{children:(0,M.jsx)(n.A,{style:{overflowX:"auto",maxWidth:"100%"},children:(0,M.jsx)(A.A,{keyField:"id",data:this.state.elementLogTableData,columns:a,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0})})})]})})})})})]}),(0,M.jsxs)(m.A,{size:"xl",isOpen:this.state.isDepScannerModalOpen,className:this.props.className,backdrop:"static",children:[this.state.isPageLoading&&(0,M.jsx)(f.A,{sentences:R.$,height:"2000%",color:"black"}),(0,M.jsxs)(p.A,{toggle:this.toggleDepScannerModal.bind(this),children:["Dependency for Element ",this.state.elementNameForDependency]}),(0,M.jsx)(g.A,{children:(0,M.jsx)(w.A,{children:(0,M.jsx)(o.A,{children:(0,M.jsx)(n.A,{lg:12,md:12,sm:12,xs:12,children:(0,M.jsxs)(d.A,{children:[(0,M.jsx)(c.A,{children:(0,M.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:this.state.elementMessageForDependency})}),(0,M.jsx)(h.A,{children:(0,M.jsx)(n.A,{style:{overflowX:"auto",maxWidth:"100%"},children:(0,M.jsx)(A.A,{keyField:"id",data:this.state.elementDependencyTableData,columns:[{dataField:"id",text:"#",headerStyle:{width:"60px"}},{dataField:"references",text:"Total Refrences",headerStyle:{width:"250px"}},{dataField:"testscriptreference",text:"Total Test Script References",headerStyle:{width:"300px"}},{dataField:"teststepreference",text:"Total Test Step References",headerStyle:{width:"300px"}},{dataField:"customfunctionrefrences",text:"Total Custom function References",headerStyle:{width:"300px"}},{dataField:"customstepreference",text:"Total Custom Step References",headerStyle:{width:"300px"}}],wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0})})})]})})})})})]})]})}}const I=P},8486:()=>{}}]);