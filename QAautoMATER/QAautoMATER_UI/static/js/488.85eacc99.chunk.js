"use strict";(self.webpackChunkqaautomater=self.webpackChunkqaautomater||[]).push([[488],{3056:(t,e,a)=>{a.d(e,{O:()=>i});var i={FolderTreeData:[],IsErrorOnDefectTitle:!1,DefectTitle:"",IsErrorOnPlaceHolder:!1,PlaceHolderName:"",ListOfPlaceHolder:[],ListOfPriorityOptions:["High","Medium","Low"],DefectPriority:"Medium",ListOfSeverity:["Blocker","Critical","Major","Minor","Low"],DefectSeverity:"Minor",ListOfDefectStatus:["Open","In Progress","Ready for development","Ready for test","Close","Not a defect-By Design","No longer exist"],DefectStatus:"Open",ListOfAssignedUsers:[],DefectAssignedTo:{},ListOfTestCycle:[],LisOfTestID:[],SelectedTestId:[],IsErrorOnTestCycle:!1,TestCaseTestCycle:"",IsErrorOnDefectSteps:!1,DefectStepsToReproduce:"",AllDefectDetails:[],SelectedPlaceHolderPath:"",SelectedPlaceHolderLabel:"",IsErrorOnNewPlaceHOlder:!1,NewPlaceHolderName:"",DefectId:"",IsErrorOnUpdatedDefectTitle:!1,UpdatedDefectTitle:"",UpdatedTestPlaceHolder:"",UpdatedTestPriority:"",UpdateddefectSeverity:"",UpdatedDefectStatus:"",DefectNewAssignee:{},UpdatedTestID:[],UpdatedTestCycle:"",UpdatedTestRefence:"",UpdatedDefectSteps:"",TestHistory:[],TestComments:[],ActiveTab:"1",ClassNameForComment:"active",ClassNameForHistory:"",NewTestCaseComment:"",IsErrorOnTestComment:!1,EnvironmentList:[],SelectedEnvironment:[],UpdatedEnvironment:[],FirstEnvironment:[],AttachmentData:[],AllAttachmentToPush:[],SelectedRowFromAttachmentTable:-1,UpdateAttachmentData:[],UpdatedRowFromAttachmentTable:-1,AllUpdateAttachmentToPush:[],DefectCustomField:[],DefectUpdateCustomField:[],DefectCustomFieldsWithoutValue:[],CustomKeyNameToUpdate:"",ListOfCustomValueForKey:[],SelectedValueForCustomKey:"",CustomKeyListForListBoxOption:[],CustomKeyListBoxWithKeyAnaValue:{},SelectedRowIDforCustomFieldTable:-1,SelectedRowIDforUpdateCustomFieldTable:-1}},8980:(t,e,a)=>{a.d(e,{Z:()=>d});var i=a(3056),s=a(8390),r=a(9696),o=a(8758),l=a(5002);const d=new class{async loadDefectPage(){try{await o.Z.manualConfigPageLoad();var t=await l.M.AllConfigData;await this.getListOfEnvironment(await t),await this.setCustomFieldData(await t),i.O.ListOfTestCycle=await l.M.ListOfTestCycle,i.O.TestCaseTestCycle=await l.M.CurrentTestCycle;var e=await o.Z.getPlaceHolderTreeData();i.O.FolderTreeData=await e;try{await localStorage.removeItem("testId"),await localStorage.removeItem(await localStorage.removeItem("testId"))}catch(v){}var a=await o.Z.getListOfUsers();i.O.ListOfAssignedUsers=[];for(let t=0;t<await a.length;t++){var s={value:await a[t],label:a[t]};i.O.ListOfAssignedUsers.push(await s)}if(void 0!==await localStorage.getItem("defectDetails")&&null!==await localStorage.getItem("defectDetails")){var r=await JSON.parse(await localStorage.getItem("defectDetails"));if(await r.length>0){var d=await r[await r.length-1].stepdefinition,c=await r[await r.length-1].testdata,n=await r[await r.length-1].screenshot;i.O.DefectTitle=await d;var w,h="<p><strong>Environment</strong> : "+await localStorage.getItem("defectEnvironment")+"</p><p><strong>Steps </strong></p>",m="";for(let t=0;t<await r.length-1;t++){var u=await r[await t].stepdefinition,f=await r[await t].testdata;""!==await f&&void 0!==await f&&(u=await u+" ("+await f+")"),m=await m+"<li>"+await u+"</li>"}var p="<li>"+await d+"</li>",S="<ol>"+await"<li>Launch application as per provided environment</li>"+await m+await p+"</ol>";c="<p><strong>Actual behaviour</strong></p><p>"+await c+"</p>";var D='<p><strong>Screenshot</strong></p><p><img src="data:image/png;base64,'+await n+'"></p>';w="<p>"+await h+await S+await c+await D+"</p>",i.O.DefectStepsToReproduce=await w}}try{await localStorage.removeItem("defectDetails")}catch(v){}}catch(v){}}async getListOfEnvironment(t){try{var e=await t.Environment;if(void 0===await e)i.O.EnvironmentList=[],i.O.FirstEnvironment=[];else if(0===await e.length)i.O.EnvironmentList=[],i.O.FirstEnvironment=[];else{var a=[];for(let t=0;t<await e.length;t++){var s,r=await e[t].name;if(s={label:await r,value:await r},a.push(await s),0===await t){var o=[];o.push(await s),i.O.FirstEnvironment=await o}}i.O.EnvironmentList=await a}}catch(l){i.O.EnvironmentList=[]}}async addNewDefect(){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var t=await localStorage.getItem("UserSelectedAccount"),e={};e.defectName=await i.O.DefectTitle,e.placeHolder=await i.O.PlaceHolderName,e.priority=await i.O.DefectPriority,e.severity=await i.O.DefectSeverity,e.status=await i.O.DefectStatus,e.assignedTo=await i.O.DefectAssignedTo,e.testCycle=await i.O.TestCaseTestCycle,e.testId=await i.O.SelectedTestId,e.defectSteps=await i.O.DefectStepsToReproduce,e.createdBy=await s.Q.userEmail,e.environment=await i.O.SelectedEnvironment,e.attachment=await i.O.AttachmentData,e.customfields=await i.O.DefectCustomField;var a=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(a=s.D.remoteBackendAPI);var o={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},l=await r.Z.post(await a+"defect/project/"+t+"/createnewdefect",await o,await e),d=await l.data;if(s.D.ErrorMessage=await d.errorMessage,await d.isFileSaved){var c=d.defectId,n=await i.O.AllAttachmentToPush;if(void 0!==await n&&await n.length>0)for(let t=0;t<await n.length;t++)await this.uploadFileToServer(await n[t],"Defects",await c+"_")}return await d}async uploadFileToServer(t,e,a){if(await s.D.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{var i=await localStorage.getItem("UserSelectedAccount"),o=await s.D.backendAPI;"remote"===s.D.backendServiceAt&&(o=await s.D.remoteBackendAPI);let n=new FormData;n.append("file",await t);var l={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail,"Content-Type":"multipart/form-data",foldername:await e,prefix:await a},d=await r.Z.post(o+"fileupload/project/"+await i+"/addattachment",await l,await n),c=await d.data;return await c}catch(n){s.D.ErrorMessage=await n.message}}async createNewPlaceHolderForTestCase(){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var t=await localStorage.getItem("UserSelectedAccount"),e={};e.newPlaceHolderName=await i.O.NewPlaceHolderName.trim(),e.relativePath=await i.O.SelectedPlaceHolderPath.trim();var a=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(a=s.D.remoteBackendAPI);var o={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},l=await r.Z.post(await a+"manualtestcase/project/"+t+"/addnewtesttree",await o,await e),d=await l.data;return s.D.ErrorMessage=await d.errorMessage,await d.isFileSaved&&(i.O.FolderTreeData=await d.testTreeData),await d.isFileSaved}async isPlaceHolderAlreadyExist(){var t=await i.O.FolderTreeData,e=await t,a=await i.O.SelectedPlaceHolderPath,s=await i.O.NewPlaceHolderName,r=await a.split("/");for(let i=0;i<await r.length;i++){var o=await r[i];for(let t=0;t<await e.length;t++){var l=await e[t].key;if(await l.toLowerCase().trim()===o.toLocaleLowerCase().trim()){e=await e[t].nodes;break}}}for(let i=0;i<await e.length;i++)if(await s.toLowerCase().trim()===await e[i].key.toLowerCase().trim())return!0;return!1}async getAllTestIDfromPath(t){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),[{value:"QB-1",label:"QB-1"},{value:"QB-2",label:"QB-2"}];try{var e=await localStorage.getItem("UserSelectedAccount"),a={};a.componentPath=await t;var i=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(i=s.D.remoteBackendAPI);var o={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},l=await r.Z.post(await i+"manualtestcase/project/"+e+"/getalltestid",await o,await a),d=await l.data;return await d}catch(c){return[]}}async getAllDefectFromPath(t){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),[{id:1,defectid:"DF-1",title:"My dummy defect",component:"Landing Page",priority:"Medium",severity:"Low",status:"Open",assignto:"dummyuser@test.com",cycle:"Sprint 12.0",testid:"",createdby:"Pravesh",customkey:""}];try{var e=await localStorage.getItem("UserSelectedAccount"),a={};a.componentPath=await t;var i=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(i=s.D.remoteBackendAPI);var o={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},l=await r.Z.post(await i+"defect/project/"+e+"/getalldefects",await o,await a),d=await l.data;return await d}catch(c){return[]}}async saveTestComments(t){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var e=await localStorage.getItem("UserSelectedAccount"),a={};a.testComment=await t;var o=i.O.UpdatedTestPlaceHolder+"/"+i.O.UpdatedTestCycle+"/"+i.O.DefectId;a.testPath=await o;var l=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(l=s.D.remoteBackendAPI);var d={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},c=await r.Z.post(await l+"defect/project/"+e+"/adddefectcomment",await d,await a),n=await c.data;return s.D.ErrorMessage=await n.errorMessage,await n.isFileSaved}async getDefectIdDetails(){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var t=await localStorage.getItem("UserSelectedAccount"),e={},a=i.O.UpdatedTestPlaceHolder+"/"+i.O.UpdatedTestCycle+"/"+i.O.DefectId;e.testPath=await a;var o=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(o=s.D.remoteBackendAPI);var l={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},d=await r.Z.post(await o+"defect/project/"+t+"/getdefectiddetails",await l,await e),c=await d.data;return await c}async updateDefectField(t){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var e=await localStorage.getItem("UserSelectedAccount"),a={},o=i.O.UpdatedTestPlaceHolder+"/"+i.O.UpdatedTestCycle+"/"+i.O.DefectId;a.testPath=await o,a.defectName=await i.O.UpdatedDefectTitle,a.priority=await i.O.UpdatedTestPriority,a.severity=await i.O.UpdateddefectSeverity,a.status=await i.O.UpdatedDefectStatus,a.assignedTo=await i.O.DefectNewAssignee,a.testId=await i.O.UpdatedTestID,a.defectSteps=await i.O.UpdatedDefectSteps,a.environment=await i.O.UpdatedEnvironment,a.attachment=await i.O.UpdateAttachmentData,a.customfields=await i.O.DefectUpdateCustomField,a.history=await t;var l=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(l=s.D.remoteBackendAPI);var d={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},c=await r.Z.post(await l+"defect/project/"+e+"/updatedefect",await d,await a),n=await c.data;return s.D.ErrorMessage=await n.errorMessage,await n.isFileSaved}async deleteDefect(){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var t=await localStorage.getItem("UserSelectedAccount"),e={},a=i.O.UpdatedTestPlaceHolder+"/"+i.O.UpdatedTestCycle+"/"+i.O.DefectId;e.testPath=await a,e.defectId=await i.O.DefectId;var o=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(o=s.D.remoteBackendAPI);var l={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},d=await r.Z.post(await o+"defect/project/"+t+"/deletedefect",await l,await e),c=await d.data;return s.D.ErrorMessage=await c.errorMessage,await this.deleteAllUnUsedFile("Defects",i.O.DefectId+"_",[]),await c.isFileDeleted}async getTestAutomationSteps(){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var t=await localStorage.getItem("UserSelectedAccount"),e={},a=i.O.UpdatedTestPlaceHolder+"/"+i.O.UpdatedTestCycle+"/"+i.O.TestId;e.testName=await i.O.UpdatedTestName,e.testSteps=await i.O.UpdatedTestSteps,e.testPrecondition=await i.O.UpdatedTestPrecondition,e.testExpectedResult=await i.O.UpdatedExpectedResults,e.testId=await i.O.TestId,e.placeHolder=await a;try{await localStorage.removeItem("testId"),await localStorage.removeItem(await i.O.TestId)}catch(n){}var o=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(o=s.D.remoteBackendAPI);var l={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},d=await r.Z.post(await o+"manualtestcase/project/"+t+"/getautomationsteps",await l,await e),c=await d.data;return await localStorage.setItem("testId",await i.O.TestId),await localStorage.setItem(i.O.TestId,JSON.stringify(await c)),await c}async downloadFromServer(t,e){if(await s.D.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{var a=await localStorage.getItem("UserSelectedAccount"),i=await s.D.backendAPI;"remote"===s.D.backendServiceAt&&(i=await s.D.remoteBackendAPI);var o={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail,foldername:await t,filename:await e},l=await r.Z.get(i+"fileupload/project/"+await a+"/downloadattachment",await o),d=await l.data;if(await d.isSuccess){const t=await atob(await d.content),a=await new Uint8Array([...t].map((t=>t.charCodeAt(0)))),i=new Blob([await a],{type:await d["content-type"]}),s=await document.createElement("a");s.setAttribute("download",await e),s.href=await window.URL.createObjectURL(await i),await document.body.appendChild(await s),await s.click(),await document.body.removeChild(s)}else s.D.ErrorMessage=await d.errorMessage;return await d.isSuccess}catch(c){s.D.ErrorMessage=await c.message}}async uploadUpdateandDeleteFileToServer(t,e,a){if(await s.D.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{if(await e.length>0)for(let a=0;a<await await e.length;a++)await this.uploadFileToServer(await e[a],"Defects",await t+"_")}catch(i){s.D.ErrorMessage=await i.message}await this.deleteAllUnUsedFile("Defects",await t+"_",await a)}async deleteAllUnUsedFile(t,e,a){if(await s.D.isDemo)return await new Promise((t=>setTimeout(t,3e3))),!0;try{var i=await localStorage.getItem("UserSelectedAccount"),o=await s.D.backendAPI;"remote"===s.D.backendServiceAt&&(o=await s.D.remoteBackendAPI);var l={};l.foldername=await t,l.prefix=await e,l.files=await a;var d={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},c=await r.Z.post(o+"fileupload/project/"+await i+"/deleteunusedfile",await d,await l),n=await c.data;return await n}catch(w){s.D.ErrorMessage=await w.message}}async setCustomFieldData(t){if(s.D.isDemo)i.O.DefectCustomField=[];else try{var e=await t.DefectCustomKeys;if(void 0===await e)i.O.DefectCustomField=[];else if(0===await e.length)i.O.DefectCustomField=[];else{var a=[],r=[];i.O.CustomKeyListForListBoxOption=[],i.O.CustomKeyListBoxWithKeyAnaValue={};for(let t=0;t<await e.length;t++){var o=await e[t].key,l="",d=await e[t].value;if(""!==await d){d=await JSON.parse(await d);var c=await d;i.O.CustomKeyListForListBoxOption.push(await o),await d.length>0&&(l=await d[0])}var n={id:Number(t)+1,key:await o,value:await l},w={id:Number(t)+1,key:await o,value:""};a.push(await n),r.push(await w),void 0===i.O.CustomKeyListBoxWithKeyAnaValue[await o]&&(i.O.CustomKeyListBoxWithKeyAnaValue[await o]=await c)}i.O.DefectCustomField=await a,i.O.DefectCustomFieldsWithoutValue=await r}}catch(h){i.O.DefectCustomField=[]}}async clearvalueForDefectCustomFieldsWithoutValue(){var t=await i.O.DefectCustomFieldsWithoutValue;for(let a=0;a<await t.length;a++){var e=await t[a].value;""!==await e&&(t[a].value="")}i.O.DefectCustomFieldsWithoutValue=await t}async getDefectIdDetailsBasedonDetails(t,e,a){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var i=await localStorage.getItem("UserSelectedAccount"),o={},l=await t+"/"+await e+"/"+await a;o.testPath=await l;var d=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(d=s.D.remoteBackendAPI);var c={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},n=await r.Z.post(await d+"defect/project/"+i+"/getdefectiddetails",await c,await o),w=await n.data;return await w}async setCustomFieldForExistingDefect(t){var e=[];e=await i.O.DefectCustomFieldsWithoutValue;for(let i=0;i<await e.length;i++){var a=await e[i].key;for(let r=0;r<await t.length;r++){var s=await t[r].key;if(await a===await s){e[i].value=await t[r].value;break}}}return await e}async getColumnNameIfValid(t){var e={isvalid:!1,component:-1,title:-1,defectsteps:-1,priority:-1,severity:-1,status:-1,assignedto:-1,environment:-1,linkedtestid:-1,createdby:-1},a=!1,i=!1,s=!1,r=!1,o=!1,l=!1,d=!1,c=!1,n=!1,w=!1;const h=await t.map((t=>t.toLowerCase()));for(let m=0;m<await h.length;m++)await a||(await h[m].includes("screen")||await h[m].includes("component")||await h[m].includes("module")||await h[m].includes("page"))&&(e.component=await m,a=!0),await s||(await h[m].includes("steps to")||await h[m].includes("stepsto")||await h[m].includes("stepto")||await h[m].includes("step to")||await h[m].includes("description"))&&(e.defectsteps=await m,s=!0),await i||(await h[m].includes("summary")||await h[m].includes("title")||await h[m].includes("name"))&&(e.title=await m,i=!0),await r||await h[m].includes("priority")&&(e.priority=await m,r=!0),await o||await h[m].includes("severity")&&(e.severity=await m,o=!0),await l||await h[m].includes("status")&&(e.status=await m,l=!0),await w||(await h[m].includes("createdby")||await h[m].includes("created by")||await h[m].includes("author")||await h[m].includes("owner"))&&(e.createdby=await m,w=!0),await c||(await h[m].includes("environment")||await h[m].includes("env."))&&(e.environment=await m,c=!0),await d||await h[m].includes("assigned")&&(e.assignedto=await m,d=!0),await n||(await h[m].includes("testid")||await h[m].includes("testcaseid")||await h[m].includes("test case id")||await h[m].includes("testcase id"))&&(e.linkedtestid=await m,n=!0);return await Number(e.component)>-1&&await Number(e.defectsteps>-1)&&await Number(e.title>-1)&&(e.isvalid=!0),await e}async getCustomColumnIndex(t){var e={},a=await i.O.DefectCustomField;for(let i=0;i<await a.length;i++){var s=await a[i].key,r=await s.toLocaleLowerCase();const l=await t.map((t=>t.toLowerCase()));for(let t=0;t<await l.length;t++){var o=await l[t];if(await o===await r){e[await s]=await t;break}}}return await e}async getTextFromHtmlText(t){if(void 0===await t)return"";var e=await t;try{const a=new DOMParser,i=await a.parseFromString(await t,"text/html");t=await Array.from(i.body.childNodes).map((t=>(t.nodeType===Node.ELEMENT_NODE?"\n":"")+t.textContent)).join(""),e=await t}catch(a){}return await e}async getValidPriority(t){if(void 0===await t||null===await t)return"Medium";switch(await t.toLocaleLowerCase()){case"high":return"High";case"low":return"Low";default:return"Medium"}}async getValidSeverity(t){if(void 0===await t||null===await t)return"Minor";switch(await t.toLocaleLowerCase()){case"blocker":return"Blocker";case"critical":return"Critical";case"manjor":return"Major";case"low":return"Low";default:return"Minor"}}async getValidDefectStatus(t){if(void 0===await t||null===await t)return"Open";switch(await t.toLocaleLowerCase()){case"inprogress":case"in progress":case"in-progress":return"In Progress";case"close":case"closed":return"Close";case"ready for development":return"Ready for development";case"ready for test":return"Ready for test";case"not a defect-by design":return"Not a defect-By Design";case"no longer exist":return"No longer exist";default:return"Open"}}async getMaxRangeForTestCase(t,e,a,i){if(await t===await a)return await t;for(let r=Number(await t)+1;r<a;r++){var s=await i[r][await e];if(""!==await s&&void 0!==await s)return await r}return await a}async createPathForComponent(t){try{var e="";t=await t.replaceAll("(","/"),t=await t.replaceAll(")","/");var a=await t.split("/");for(let t=0;t<await a.length;t++){var i=await a[t].trim();""!==(i=await i.replace(/[^a-zA-z0-9 ]/g,"").trim())&&(e=await e+"/"+await i)}return e=await e.substring(1),await e}catch(s){return""}}async createPlaceHolderFromExcelFile(t){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var e=await localStorage.getItem("UserSelectedAccount"),a=await e,i=await t.split("/");for(let s=0;s<await i.length;s++){var r=await i[s].trim(),o=await this.isComponetWithSubComponentAlreadyExist(await a,await r);await!o&&await this.createNewPlaceHolderFromExcelSheet(await a,await r),a=await a+"/"+await r}}async isComponetWithSubComponentAlreadyExist(t,e){var a=await i.O.FolderTreeData,s=await a,r=await t.split("/");for(let i=0;i<await r.length;i++){var o=await r[i];for(let t=0;t<await s.length;t++){var l=await s[t].key;if(await l.toLowerCase().trim()===o.toLocaleLowerCase().trim()){s=await s[t].nodes;break}}}for(let i=0;i<await s.length;i++)if(await e.toLowerCase().trim()===await s[i].key.toLowerCase().trim())return!0;return!1}async createNewPlaceHolderFromExcelSheet(t,e){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var a=await localStorage.getItem("UserSelectedAccount"),o={};o.newPlaceHolderName=await e,o.relativePath=await t;var l=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(l=s.D.remoteBackendAPI);var d={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},c=await r.Z.post(await l+"manualtestcase/project/"+a+"/addnewtesttree",await d,await o),n=await c.data;return s.D.ErrorMessage=await n.errorMessage,await n.isFileSaved&&(i.O.FolderTreeData=await n.testTreeData),await n.isFileSaved}async createCustomColumnforImport(t,e,a){var i=[];if(void 0===await t||""===await t)return await i;var s,r=await Object.keys(await t);for(let n=0;n<await r.length;n++){var o=await r[n],l=await t[await o],d={id:n+1,key:await o,value:""};try{s=await e[await a][await l]}catch(c){s=""}d.value=await s,i.push(await d)}return await i}async addNewDefectWithAttribute(t,e,a,o,l,d,c,n,w,h,m,u){if(s.D.isDemo)return await new Promise((t=>setTimeout(t,2e3))),!0;var f=await localStorage.getItem("UserSelectedAccount"),p={};p.defectName=await t,p.placeHolder=await e,p.priority=await a,p.severity=await o,p.status=await l,p.assignedTo=await d,p.testCycle=await c,p.testId=await n,p.defectSteps=await w,p.createdBy=await h,p.environment=await m,p.attachment=[],p.customfields=await u;var S=s.D.backendAPI;"remote"===await s.D.backendServiceAt&&(S=s.D.remoteBackendAPI);var D={Authorization:await s.Q.userToken,userEmail:await s.Q.userEmail},v=await r.Z.post(await S+"defect/project/"+f+"/createnewdefect",await D,await p),O=await v.data;if(s.D.ErrorMessage=await O.errorMessage,await O.isFileSaved){var g=O.defectId,T=await i.O.AllAttachmentToPush;if(void 0!==await T&&await T.length>0)for(let t=0;t<await T.length;t++)await this.uploadFileToServer(await T[t],"Defects",await g+"_")}return await O}async getValidEnvironmentList(t){var e=[];if(""===await t||void 0===await t)return e;var a=await i.O.EnvironmentList;for(let i=0;i<await a.length;i++){var s=await a[i].value;if(await s===await t)return e.push(a[i]),await e}return await a.length>0?(e.push(a[0]),await e):e}async getValidAssignedTo(t){var e={};if(""===await t||void 0===await t)return e;var a=await i.O.ListOfAssignedUsers;for(let i=0;i<await a.length;i++){var s=await a[i].value;if(await s===await t)return await a[i]}return e}async getValidLinkedTestId(t){var e=[];if(""===await t||void 0===await t)return e;if(!await t.includes("QB-"))return e;var a=[],i=await t.split(",");for(let o=0;o<await i.length;o++){var s=await i[o];if(await t.includes("QB-")){var r={label:await s,value:await s};a.push(await r)}}return a}async getCreatedByValid(t){return""===await t||void 0===await t?s.Q.userEmail:await t.includes("@")?t:s.Q.userEmail}}},9017:(t,e,a)=>{a.a(t,(async(t,i)=>{try{a.r(e),a.d(e,{default:()=>$});var s=a(6075),r=a(7313),o=a(106),l=a(6782),d=a(5399),c=a(7926),n=a(200),w=a(2504),h=a(4948),m=a(308),u=a(1781),f=a(4660),p=a(9327),S=a(238),D=a(2527),v=a(3516),O=a(6597),g=a(4209),T=a(3455),y=a(2020),C=a(8642),x=a(2742),F=a(1613),b=a(5709),P=a(6678),Z=a(9686),A=a(2181),j=a(3056),N=a(8980),I=a(8390),U=a(3701),E=(a(4100),a(44),a(758)),k=a(6939),H=a.n(k),L=(a(8137),a(207)),R=a(4104),V=a(4118),K=a(6620),M=a(2610),B=a(8944),Q=a(3438),z=(a(1123),a(8212)),W=a(16),_=a.n(W),q=(a(4230),a(8758)),J=a(8737),Y=a(1718),G=a(6417);const t=await localStorage.getItem("UserSelectedAccount");class X extends r.Component{constructor(){super(...arguments),this.notificationSystem=r.createRef(),this.state={isPageLoading:!1,folderTreeData:j.O.FolderTreeData,isErrorOnDefectTitle:j.O.IsErrorOnDefectTitle,defectTitle:j.O.DefectTitle,isErrorOnPlaceHolder:j.O.IsErrorOnPlaceHolder,placeHolderName:j.O.PlaceHolderName,listOfPlaceHolder:j.O.ListOfPlaceHolder,listOfPriorityOptions:j.O.ListOfPriorityOptions,defectPriority:j.O.DefectPriority,listOfSeverity:j.O.ListOfSeverity,defectSeverity:j.O.DefectSeverity,listOfDefectStatus:j.O.ListOfDefectStatus,defectStatus:j.O.DefectStatus,listOfAssignedUsers:j.O.ListOfAssignedUsers,defectAssignedTo:j.O.DefectAssignedTo,listOfTestCycle:j.O.ListOfTestCycle,isErrorOnTestCycle:j.O.IsErrorOnTestCycle,testCaseTestCycle:j.O.TestCaseTestCycle,lisOfTestID:j.O.LisOfTestID,selectedTestId:j.O.SelectedTestId,isErrorOnDefectSteps:j.O.IsErrorOnDefectSteps,defectStepsToReproduce:j.O.DefectStepsToReproduce,allDefectDetails:j.O.AllDefectDetails,selectedPlaceHolderLabel:j.O.SelectedPlaceHolderLabel,selectedPlaceHolderPath:j.O.SelectedPlaceHolderPath,isErrorOnNewPlaceHOlder:j.O.IsErrorOnNewPlaceHOlder,newPlaceHolderName:j.O.NewPlaceHolderName,isDefectModalOpen:!1,defectId:j.O.DefectId,isErrorOnUpdatedDefectTitle:j.O.IsErrorOnUpdatedDefectTitle,updatedDefectTitle:j.O.UpdatedDefectTitle,updatedTestPlaceHolder:j.O.UpdatedTestPlaceHolder,updatedTestPriority:j.O.UpdatedTestPriority,updateddefectSeverity:j.O.UpdateddefectSeverity,updatedDefectStatus:j.O.UpdatedDefectStatus,defectNewAssignee:j.O.DefectNewAssignee,updatedTestCycle:j.O.UpdatedTestCycle,updatedTestID:j.O.UpdatedTestID,updatedDefectSteps:j.O.UpdatedDefectSteps,testHistory:j.O.TestHistory,testComments:j.O.TestComments,activeTab:j.O.ActiveTab,classNameForComment:j.O.ClassNameForComment,classNameForHistory:j.O.ClassNameForHistory,newTestCaseComment:j.O.NewTestCaseComment,isErrorOnTestComment:j.O.IsErrorOnTestComment,isDefectNameSame:!0,isDefectPrioritySame:!0,isDefectSeveritySame:!0,isDefectStatusSame:!0,isDefectAssignedToSame:!0,isDefectTestIdSame:!0,isDefectStepsToReproduceSame:!0,testCaseCreatedBy:"",isEnvironmentSame:!0,isDefectAttachmentSame:!0,isDefectCustomFieldsSame:!0,modalForDelete:!1,modalForCustomFields:!1,modalForUpdateCustomFields:!1,environmentList:j.O.EnvironmentList,selectedEnvironment:j.O.SelectedEnvironment,updatedEnvironment:j.O.UpdatedEnvironment,attachmentData:j.O.AttachmentData,selectedRowFromAttachmentTable:j.O.SelectedRowFromAttachmentTable,updateAttachmentData:j.O.UpdateAttachmentData,updatedRowFromAttachmentTable:j.O.UpdatedRowFromAttachmentTable,defectCustomField:j.O.DefectCustomField,defectUpdateCustomField:j.O.DefectUpdateCustomField,customKeyNameToUpdate:j.O.CustomKeyNameToUpdate,listOfCustomValueForKey:j.O.ListOfCustomValueForKey,selectedValueForCustomKey:j.O.SelectedValueForCustomKey,selectedRowIDforCustomFieldTable:j.O.SelectedRowIDforCustomFieldTable,selectedRowIDforUpdateCustomFieldTable:j.O.SelectedRowIDforUpdateCustomFieldTable,defectCustomFieldsWithoutValue:j.O.DefectCustomFieldsWithoutValue,accordionId:""},this.componentDidMount=async()=>{this.setState({isPageLoading:!0}),await window.scrollTo(0,0),await N.Z.loadDefectPage(),this.setState({folderTreeData:{}},(()=>{this.setState({folderTreeData:j.O.FolderTreeData})})),this.setState({isErrorOnDefectTitle:j.O.IsErrorOnDefectTitle}),this.setState({defectTitle:j.O.DefectTitle}),this.setState({isErrorOnPlaceHolder:j.O.IsErrorOnPlaceHolder}),this.setState({placeHolderName:j.O.PlaceHolderName}),this.setState({listOfPlaceHolder:j.O.ListOfPlaceHolder}),this.setState({listOfPriorityOptions:j.O.ListOfPriorityOptions}),this.setState({defectPriority:j.O.DefectPriority}),this.setState({listOfSeverity:j.O.ListOfSeverity}),this.setState({defectSeverity:j.O.DefectSeverity}),this.setState({listOfDefectStatus:j.O.ListOfDefectStatus}),this.setState({defectStatus:j.O.DefectStatus}),this.setState({listOfAssignedUsers:j.O.ListOfAssignedUsers}),this.setState({defectAssignedTo:j.O.DefectAssignedTo}),this.setState({listOfTestCycle:j.O.ListOfTestCycle}),this.setState({isErrorOnTestCycle:j.O.IsErrorOnTestCycle}),this.setState({testCaseTestCycle:j.O.TestCaseTestCycle}),this.setState({lisOfTestID:j.O.LisOfTestID}),this.setState({selectedTestId:j.O.SelectedTestId}),this.setState({isErrorOnDefectSteps:j.O.IsErrorOnDefectSteps}),this.setState({defectStepsToReproduce:j.O.DefectStepsToReproduce}),this.setState({allDefectDetails:j.O.AllDefectDetails}),this.setState({selectedPlaceHolderLabel:j.O.SelectedPlaceHolderLabel}),this.setState({selectedPlaceHolderPath:j.O.SelectedPlaceHolderPath}),this.setState({isErrorOnNewPlaceHOlder:j.O.IsErrorOnNewPlaceHOlder}),this.setState({newPlaceHolderName:j.O.NewPlaceHolderName}),this.setState({defectId:j.O.DefectId}),this.setState({isErrorOnUpdatedDefectTitle:j.O.IsErrorOnUpdatedDefectTitle}),this.setState({updatedDefectTitle:j.O.UpdatedDefectTitle}),this.setState({updatedTestPlaceHolder:j.O.UpdatedTestPlaceHolder}),this.setState({updatedTestPriority:j.O.UpdatedTestPriority}),this.setState({updateddefectSeverity:j.O.UpdateddefectSeverity}),this.setState({updatedDefectStatus:j.O.UpdatedDefectStatus}),this.setState({defectNewAssignee:j.O.DefectNewAssignee}),this.setState({updatedTestCycle:j.O.UpdatedTestCycle}),this.setState({updatedTestID:j.O.UpdatedTestID}),this.setState({updatedDefectSteps:j.O.UpdatedDefectSteps}),this.setState({testHistory:j.O.TestHistory}),this.setState({testComments:j.O.TestComments}),this.setState({activeTab:j.O.ActiveTab}),this.setState({classNameForComment:j.O.ClassNameForComment}),this.setState({classNameForHistory:j.O.ClassNameForHistory}),this.setState({newTestCaseComment:j.O.NewTestCaseComment}),this.setState({isErrorOnTestComment:j.O.IsErrorOnTestComment}),this.setState({environmentList:j.O.EnvironmentList}),this.setState({selectedEnvironment:j.O.SelectedEnvironment}),this.setState({updatedEnvironment:j.O.UpdatedEnvironment}),this.setState({attachmentData:j.O.AttachmentData}),this.setState({updateAttachmentData:j.O.UpdateAttachmentData}),this.fileInputRef=r.createRef(),this.fileUpdateInputRef=r.createRef(),this.setState({defectCustomField:j.O.DefectCustomField}),this.setState({defectUpdateCustomField:j.O.DefectUpdateCustomField}),this.setState({customKeyNameToUpdate:j.O.CustomKeyNameToUpdate}),this.setState({listOfCustomValueForKey:j.O.ListOfCustomValueForKey}),this.setState({selectedValueForCustomKey:j.O.SelectedValueForCustomKey}),this.setState({selectedRowIDforCustomFieldTable:j.O.SelectedRowIDforCustomFieldTable}),this.setState({selectedRowIDforUpdateCustomFieldTable:j.O.SelectedRowIDforUpdateCustomFieldTable}),this.setState({defectCustomFieldsWithoutValue:j.O.DefectCustomFieldsWithoutValue}),this.setState({isPageLoading:!1})},this.getNotification=async(t,e)=>{this.notificationSystem.current.addNotification({message:e,level:t,autoDismiss:10})},this.addNewDefectTitle=async t=>{this.setState({isErrorOnDefectTitle:!1});var e=await t.target.value;if(await this.state.defectTitle!==await e){j.O.DefectTitle=await e,this.setState({defectTitle:await e});await/[^A-Za-z0-9-,. -]/gi.test(await e)&&(j.O.IsErrorOnDefectTitle=!0,this.setState({isErrorOnDefectTitle:!0}))}},this.selectPlaceHolder=async t=>{this.setState({isErrorOnPlaceHolder:!1});var e=await t.target.value;await this.state.placeHolderName!==await e&&(j.O.PlaceHolderName=await e,this.setState({placeHolderName:await e}))},this.selectDefectPriority=async t=>{var e=await t.target.value;await this.state.defectPriority!==await e&&(j.O.DefectPriority=await e,this.setState({defectPriority:await e}))},this.selectDefectSeverity=async t=>{var e=await t.target.value;await this.state.defectSeverity!==await e&&(j.O.DefectSeverity=await e,this.setState({defectSeverity:await e}))},this.updateDefectSeverity=async t=>{var e=await t.target.value;await this.state.updateddefectSeverity!==await e?(this.setState({isDefectSeveritySame:!0}),j.O.UpdateddefectSeverity=await e,this.setState({updateddefectSeverity:await e})):this.setState({isDefectSeveritySame:!0})},this.selectDefectStatus=async t=>{var e=await t.target.value;await this.state.defectStatus!==await e&&(j.O.DefectStatus=await e,this.setState({defectStatus:await e}))},this.updateDefectStatus=async t=>{var e=await t.target.value;await this.state.updatedDefectStatus!==await e?(this.setState({isDefectStatusSame:!1}),j.O.UpdatedDefectStatus=await e,this.setState({updatedDefectStatus:await e})):this.setState({isDefectStatusSame:!0})},this.selectTestCycle=async t=>{this.setState({isErrorOnTestCycle:!1});var e=await t.target.value;await this.state.testCaseTestCycle!==await e&&(j.O.TestCaseTestCycle=await e,this.setState({testCaseTestCycle:await e}))},this.addStepsToRepduce=async t=>{this.setState({isErrorOnDefectSteps:!1});var e=await t.target.value;await this.state.defectStepsToReproduce!==await e&&(e=await e.toString(),j.O.DefectStepsToReproduce=await e,this.setState({defectStepsToReproduce:await e}))},this.addDefectStepsToRepduce=async t=>{var e=await t;await this.state.defectStepsToReproduce!==await e&&(j.O.DefectStepsToReproduce=await e,this.setState({defectStepsToReproduce:await e}))},this.mapTestCase=async t=>{j.O.SelectedTestId=await t,this.setState({selectedTestId:j.O.SelectedTestId})},this.mapUpdatedTestCase=async t=>{this.state.updatedTestID!==await t?(j.O.UpdatedTestID=await t,this.setState({updatedTestID:j.O.UpdatedTestID}),this.setState({isDefectTestIdSame:!1})):this.setState({isDefectTestIdSame:!0})},this.selectEmail=async t=>{j.O.DefectAssignedTo=await t,this.setState({defectAssignedTo:j.O.DefectAssignedTo})},this.updateEmail=async t=>{await this.state.defectNewAssignee!==await t?(j.O.DefectNewAssignee=await t,this.setState({defectNewAssignee:j.O.DefectNewAssignee}),this.setState({isDefectAssignedToSame:!1})):this.setState({isDefectAssignedToSame:!0})},this.createNewDefect=async t=>{await t.preventDefault();var e=this.state.defectTitle,a=this.state.placeHolderName,i=this.state.defectStepsToReproduce,s=this.state.testCaseTestCycle,r=this.state.selectedEnvironment,o="";if(""===await e.toString().trim()&&(o="Title can not be blank.",this.setState({isErrorOnDefectTitle:!0})),""===await a.toString().trim()&&(o+="Placeholder can not be blank.",this.setState({isErrorOnPlaceHolder:!0})),""===await i.toString().trim()&&(o+="Steps to reproduce can not be blank.",this.setState({isErrorOnDefectSteps:!0})),""===await s.toString().trim()&&(o+="Cycle can not be blank.",this.setState({isErrorOnTestCycle:!0})),0===await r.length&&(o+="Environment can not be blank."),""!==await o)return await this.getNotification("error",await o);if(await this.state.isErrorOnDefectTitle)return this.setState({isErrorOnDefectTitle:!0}),await this.getNotification("error","Defect title should have only alphabets.");this.setState({isPageLoading:!0});var l=await N.Z.addNewDefect();if(this.setState({isPageLoading:!1}),!await l.isFileSaved)return await this.getNotification("error","Unable to create new defect because of "+I.D.ErrorMessage);this.setState({defectTitle:""}),j.O.DefectTitle="",this.setState({defectPriority:"Medium"}),j.O.DefectPriority="Medium",this.setState({defectSeverity:"Minor"}),j.O.DefectSeverity="Monor",this.setState({defectStatus:"Open"}),j.O.DefectStatus="Open",this.setState({defectStepsToReproduce:""}),j.O.DefectStepsToReproduce="",this.setState({defectAssignedTo:[]}),j.O.DefectAssignedTo=[],this.setState({selectedTestId:[]}),j.O.SelectedTestId=[],j.O.SelectedEnvironment=[],this.setState({selectedEnvironment:[]}),j.O.AttachmentData=[],this.setState({attachmentData:[]}),j.O.AllAttachmentToPush=[],this.setState({selectedRowFromAttachmentTable:-1}),j.O.SelectedRowFromAttachmentTable=-1,j.O.DefectCustomField=[],this.setState({defectCustomField:[]}),await this.getNotification("success","Defect id "+await l.defectId+" is successfully created."),await new Promise((t=>setTimeout(t,2e3))),await window.location.reload()},this.selectPlaceHolderFromTree=async e=>{j.O.ListOfPlaceHolder=[];var a=await e.key,i=await e.label;if(j.O.SelectedPlaceHolderPath=await a,j.O.SelectedPlaceHolderLabel=await i,this.setState({selectedPlaceHolderPath:await a}),this.setState({selectedPlaceHolderLabel:await i}),this.setState({isErrorOnNewPlaceHOlder:!1}),await a!==await t){this.setState({isErrorOnPlaceHolder:!1});var s=await a.split("/"),r="";for(let t=1;t<await s.length;t++)r=await r+"/"+await s[t];r=await r.substring(1),j.O.ListOfPlaceHolder.push(await r),j.O.PlaceHolderName=await r,this.setState({listOfPlaceHolder:await j.O.ListOfPlaceHolder}),this.setState({placeHolderName:await r})}else this.setState({isErrorOnPlaceHolder:!1}),j.O.ListOfPlaceHolder=[],j.O.PlaceHolderName="",this.setState({listOfPlaceHolder:await j.O.ListOfPlaceHolder}),this.setState({placeHolderName:""});j.O.SelectedTestId=[],this.setState({selectedTestId:[]}),this.setState({isPageLoading:!0});var o=await N.Z.getAllTestIDfromPath(await a);this.setState({lisOfTestID:await o}),j.O.LisOfTestID=await o,j.O.AllDefectDetails=[],this.setState({allDefectDetails:[]});var l=await N.Z.getAllDefectFromPath(await a);j.O.AllDefectDetails=await l,this.setState({allDefectDetails:await l}),this.setState({isPageLoading:!1})},this.toggleDeleteModal=async()=>{this.setState({modalForDelete:!1})},this.toggleCustomField=async()=>{this.setState({modalForCustomFields:!1})},this.toggleUpdateCustomField=async()=>{this.setState({modalForUpdateCustomFields:!1})},this.addNewPlaceHolderName=async t=>{this.setState({isErrorOnNewPlaceHOlder:!1});var e=await t.target.value;if(await this.state.newPlaceHolderName!==await e){e=await e.toString(),j.O.NewPlaceHolderName=await e,this.setState({newPlaceHolderName:await e});await/[^A-Za-z ]/gi.test(await e)&&(j.O.isErrorOnNewPlaceHOlder=!0,this.setState({isErrorOnNewPlaceHOlder:!0}))}},this.toggleDefectModal=async()=>{this.setState({defectCustomFieldsWithoutValue:[]}),this.setState({defectCustomFieldsWithoutValue:j.O.DefectCustomFieldsWithoutValue}),j.O.DefectUpdateCustomField=[],this.setState({defectUpdateCustomField:[]}),j.O.SelectedValueForCustomKey="",this.setState({selectedValueForCustomKey:""}),j.O.ListOfCustomValueForKey=[],this.setState({listOfCustomValueForKey:[]}),j.O.SelectedRowIDforUpdateCustomFieldTable=-1,this.setState({selectedRowIDforUpdateCustomFieldTable:-1}),this.setState({isDefectModalOpen:!1})},this.clickOnCommentsTab=async t=>{"1"!==this.state.activeTab?(j.O.ActiveTab="1",this.setState({activeTab:"1"}),this.setState({classNameForComment:"active"}),j.O.ClassNameForComment="active",this.setState({classNameForHistory:""}),j.O.ClassNameForHistory=""):(this.setState({classNameForHistory:"active"}),j.O.ClassNameForHistory="active",this.setState({classNameForComment:""}),j.O.ClassNameForComment="")},this.clickOnHistoryTab=async t=>{"2"!==this.state.activeTab?(j.O.ActiveTab="2",this.setState({activeTab:"2"}),this.setState({classNameForHistory:"active"}),j.O.ClassNameForHistory="active",this.setState({classNameForComment:""}),j.O.ClassNameForComment=""):(this.setState({classNameForComment:"active"}),j.O.ClassNameForComment="active",this.setState({classNameForHistory:""}),j.O.ClassNameForHistory="")},this.addTestComment=async t=>{this.setState({isErrorOnTestComment:!1});var e=await t.target.value;await this.state.newTestCaseComment!==await e&&(e=await e.toString(),j.O.NewTestCaseComment=await e,this.setState({newTestCaseComment:await e}))},this.saveTestComment=async t=>{await t.preventDefault();var e=this.state.newTestCaseComment.toString().trim();if(""===await e)return this.setState({isErrorOnTestComment:!0});this.setState({isPageLoading:!0});var a=await N.Z.saveTestComments(await e);return this.setState({isPageLoading:!1}),a?(this.setState({newTestCaseComment:""}),j.O.NewTestCaseComment="",this.setState({isDefectModalOpen:!1}),await this.getNotification("success","Defect comment is successfully added.")):await this.getNotification("error","Unable to save defect comment because of "+I.D.ErrorMessage)},this.updateDefectTitle=async t=>{this.setState({isErrorOnUpdatedDefectTitle:!1});var e=await t.target.value;if(await this.state.updatedDefectTitle!==await e){this.setState({isDefectNameSame:!1}),j.O.UpdatedDefectTitle=await e,this.setState({updatedDefectTitle:await e});await/[^A-Za-z0-9-,. -]/gi.test(await e)&&(j.O.IsErrorOnUpdatedDefectTitle=!0,this.setState({isErrorOnUpdatedDefectTitle:!0})),""===await e.toString().trim()&&this.setState({isErrorOnUpdatedDefectTitle:!0})}else this.setState({isDefectNameSame:!1})},this.updateTestPriority=async t=>{var e=await t.target.value;await this.state.updatedTestPriority!==await e?(this.setState({isDefectPrioritySame:!1}),j.O.UpdatedTestPriority=await e,this.setState({updatedTestPriority:await e})):this.setState({isDefectPrioritySame:!0})},this.updateDefectSteps=async t=>{var e=await t.target.value;await this.state.updatedDefectSteps!==await e?(this.setState({isTestStepsSame:!1}),e=await e.toString(),j.O.UpdatedDefectSteps=await e,this.setState({updatedDefectSteps:await e})):this.setState({isTestStepsSame:!0})},this.updateDefectStepsToReproduce=async t=>{await this.state.updatedDefectSteps!==await t?(this.setState({isDefectStepsToReproduceSame:!1}),j.O.UpdatedDefectSteps=await t,this.setState({updatedDefectSteps:await t})):this.setState({isDefectStepsToReproduceSame:!0})},this.updateDefect=async t=>{await t.preventDefault();var e=this.state.updatedDefectTitle,a=this.state.updatedDefectSteps,i=this.state.updatedEnvironment,s="";if(""===await e.toString().trim()&&(s="Title can not be blank.",this.setState({isErrorOnUpdatedDefectTitle:!0})),""===await a.toString().trim()&&(s+="Steps to reproduce can not be blank."),"<p><br></p>"===await a.toString().trim()&&(s+="Steps to reproduce can not be blank."),0===await i.length&&(s+="Environment can not be blank."),""!==await s)return await this.getNotification("error",await s);if(await this.state.isErrorOnUpdatedDefectTitle)return this.setState({isErrorOnUpdatedDefectTitle:!0}),await this.getNotification("error","Defect title should have only alphabets.");var r="";if(this.state.isDefectNameSame||(r="".concat(r,", Title")),this.state.isDefectPrioritySame||(r="".concat(r,", Priority")),this.state.isDefectSeveritySame||(r="".concat(r,", Severity")),this.state.isDefectStatusSame||(r="".concat(r,", Status")),this.state.isDefectAssignedToSame||(r="".concat(r,", Assigned to")),this.state.isDefectTestIdSame||(r="".concat(r,", Test Id")),this.state.isEnvironmentSame||(r="".concat(r,", Environment")),this.state.isDefectStepsToReproduceSame||(r="".concat(r,", Steps to reproduce")),this.state.isDefectAttachmentSame||(r="".concat(r,", Attachment")),this.state.isDefectCustomFieldsSame||(r="".concat(r,", Custom Field")),""===r)return this.setState({isDefectModalOpen:!1}),await this.getNotification("warning","No changes to save.");var o="Defect"+(r=await r.substring(1))+" field updated.";if(this.setState({isPageLoading:!0}),!this.state.isDefectAttachmentSame){var l=j.O.DefectId,d=j.O.UpdateAttachmentData;await N.Z.uploadUpdateandDeleteFileToServer(await l,j.O.AllUpdateAttachmentToPush,await d)}var c=await N.Z.updateDefectField(await o);return this.setState({isPageLoading:!1}),await c?(this.setState({isDefectModalOpen:!1}),this.setState({isDefectNameSame:!0}),this.setState({isDefectPrioritySame:!0}),this.setState({isDefectSeveritySame:!0}),this.setState({isDefectStatusSame:!0}),this.setState({isDefectAssignedToSame:!0}),this.setState({isDefectTestIdSame:!0}),this.setState({isEnvironmentSame:!0}),this.setState({isDefectAttachmentSame:!0}),this.setState({isDefectStepsToReproduceSame:!0}),this.setState({isDefectCustomFieldsSame:!0}),j.O.AllUpdateAttachmentToPush=[],j.O.DefectUpdateCustomField=[],this.setState({defectUpdateCustomField:[]}),await this.getNotification("success","Defect is successfully updated.")):await this.getNotification("error","Unable to save defect because of "+I.D.ErrorMessage)},this.confirmdelete=async t=>{await t.preventDefault(),this.setState({modalForDelete:!0})},this.deleteDefectId=async t=>{this.setState({isPageLoading:!0});var e=await N.Z.deleteDefect();if(this.setState({isPageLoading:!1}),!e)return await this.getNotification("error","Unable to delete defect case because of "+I.D.ErrorMessage);this.setState({isDefectModalOpen:!1}),this.setState({modalForDelete:!1}),await this.getNotification("success","Defect is successfully deleted."),await new Promise((t=>setTimeout(t,3e3))),await window.location.reload()},this.automateTestCase=async t=>{await t.preventDefault(),await N.Z.getTestAutomationSteps(),await window.open("/ui/testscript","_blank")},this.selectEnvironment=async t=>{j.O.SelectedEnvironment=await t,this.setState({selectedEnvironment:j.O.SelectedEnvironment})},this.updateEnvironment=async t=>{this.state.updatedEnvironment!==await t?(j.O.UpdatedEnvironment=await t,this.setState({updatedEnvironment:j.O.UpdatedEnvironment}),this.setState({isEnvironmentSame:!1})):this.setState({isEnvironmentSame:!0})},this.uploadAttachment=async t=>{await t.preventDefault();const e=await t.target.files[0];if(await e){var a=["webm","png","jpeg","jpg","docs","doc","docx","xlsx","xls","csv","ppt","pptx","txt","mp4","mov","pdf"];const t=await e.name,o=await e.name.split(".").pop().toLowerCase(),l=await e.size,d=await l/1024,c=await d/1024;if(!await a.includes(await o))return await this.getNotification("error","File extension should be "+await a.toString());if(await c>5)return await this.getNotification("error","File size should not be greater than 5 MB");this.fileInputRef.current.value="";var i=this.state.attachmentData;if(await i.length>0)for(let e=0;e<await i.length;e++){var s=await i[e].file;if(await s.toLowerCase()===await t.toLowerCase())return await this.getNotification("error","Duplicate file name found.")}var r={id:await i.length+1,file:await t};this.setState({attachmentData:[...this.state.attachmentData,r]}),j.O.AttachmentData.push(r),j.O.AllAttachmentToPush.push(await e)}},this.handleOpenFileDialog=async t=>{this.fileInputRef.current.click()},this.handleOpenUpdateFileDialog=async t=>{this.fileUpdateInputRef.current.click()},this.selectRadioButtonFromAttachmentTable=(t,e)=>{e&&(j.O.SelectedRowFromAttachmentTable=t.id,this.setState({selectedRowFromAttachmentTable:t.id}))},this.selectRadioButtonFromUpdateAttachmentTable=(t,e)=>{e&&(j.O.UpdatedRowFromAttachmentTable=t.id,this.setState({updatedRowFromAttachmentTable:t.id}))},this.deleteAttachmentFromTable=async t=>{await t.preventDefault();var e=this.state.attachmentData;if(0===e.length)return await this.getNotification("error","Please select the attachment before delete.There is no attachment under Additional attachment section.");if(!(Number(this.state.selectedRowFromAttachmentTable)>0&&Number(this.state.selectedRowFromAttachmentTable)<=e.length))return await this.getNotification("error","Please select the attachment before delete.There is no attachment under Additional attachment section.");var a=await q.Z.updateRowIdAfterDelete(e,this.state.selectedRowFromAttachmentTable);this.setState({attachmentData:[]},(()=>{this.setState({attachmentData:a})})),j.O.AttachmentData=await a;var i=await Number(this.state.selectedRowFromAttachmentTable)-1;j.O.AllAttachmentToPush.splice(await i,1),this.setState({selectedRowFromAttachmentTable:-1}),j.O.SelectedRowFromAttachmentTable=-1},this.uploadUpdateAttachment=async t=>{await t.preventDefault();const e=await t.target.files[0];if(await e){var a=["webm","png","jpeg","jpg","docs","doc","docx","xlsx","xls","csv","ppt","pptx","txt","mp4","mov","pdf"];const t=await e.name,o=await e.name.split(".").pop().toLowerCase(),l=await e.size,d=await l/1024,c=await d/1024;if(!await a.includes(await o))return await this.getNotification("error","File extension should be "+await a.toString());if(await c>5)return await this.getNotification("error","File size should not be greater than 5 MB");this.fileUpdateInputRef.current.value="";var i=this.state.updateAttachmentData;if(await i.length>0)for(let e=0;e<await i.length;e++){var s=await i[e].file;if(await s.toLowerCase()===await t.toLowerCase())return await this.getNotification("error","Duplicate file name found.")}var r={id:await i.length+1,file:await t};this.setState({updateAttachmentData:[...this.state.updateAttachmentData,r]}),j.O.UpdateAttachmentData.push(r),j.O.AllUpdateAttachmentToPush.push(await e),this.setState({isDefectAttachmentSame:!1})}},this.deleteUpdateAttachmentFromTable=async t=>{await t.preventDefault();var e=this.state.updateAttachmentData;if(0===e.length)return await this.getNotification("error","Please select the attachment before delete.There is no attachment under Additional attachment section.");if(!(Number(this.state.updatedRowFromAttachmentTable)>0&&Number(this.state.updatedRowFromAttachmentTable)<=e.length))return await this.getNotification("error","Please select the attachment before delete.There is no attachment under Additional attachment section.");var a=await q.Z.updateRowIdAfterDelete(e,this.state.updatedRowFromAttachmentTable);this.setState({updateAttachmentData:[]},(()=>{this.setState({updateAttachmentData:a})})),j.O.UpdateAttachmentData=await a;var i=await Number(this.state.updatedRowFromAttachmentTable)-1;j.O.AllUpdateAttachmentToPush.splice(await i,1),this.setState({updatedRowFromAttachmentTable:-1}),j.O.UpdatedRowFromAttachmentTable=-1,this.setState({isDefectAttachmentSame:!1})},this.downloadFileFromServer=async t=>{await t.preventDefault();var e=this.state.updateAttachmentData;if(0===e.length)return await this.getNotification("error","Please select the attachment before download.There is no attachment under Additional attachment section.");if(Number(this.state.updatedRowFromAttachmentTable)>0&&Number(this.state.updatedRowFromAttachmentTable)<=e.length){var a=await Number(this.state.updatedRowFromAttachmentTable)-1,i=await e[await a].file,s=await this.state.defectId;i=await s+"_"+await i;var r=await N.Z.downloadFromServer("Defects",await i);return await r?(await new Promise((t=>setTimeout(t,3e3))),await this.getNotification("success","File is successfully downloded from the server.")):await this.getNotification("error","Unable to download file from the server."+I.D.ErrorMessage)}return await this.getNotification("error","Please select the attachment before download.")},this.cloneDefect=async()=>{this.setState({isPageLoading:!0}),this.setState({isErrorOnDefectTitle:!1}),this.setState({isErrorOnPlaceHolder:!1});var t=j.O.UpdatedDefectTitle;j.O.DefectTitle=await t,this.setState({defectTitle:await t});var e=await j.O.UpdatedTestPlaceHolder,a=await j.O.ListOfPlaceHolder;0===await a.length&&j.O.ListOfPlaceHolder.push(await e),j.O.PlaceHolderName=await e,this.setState({placeHolderName:await e});var i=await j.O.UpdatedTestPriority;j.O.DefectPriority=await i,this.setState({defectPriority:await i});var s=await j.O.UpdateddefectSeverity;j.O.DefectSeverity=await s,this.setState({defectSeverity:await s});var r=await j.O.UpdatedEnvironment;j.O.SelectedEnvironment=await r,this.setState({selectedEnvironment:await r});var o=j.O.UpdatedDefectSteps;j.O.DefectStepsToReproduce=await o,this.setState({defectStepsToReproduce:await o});var l=await j.O.DefectNewAssignee;j.O.DefectAssignedTo=await l,this.setState({defectAssignedTo:await l});var d=j.O.UpdatedTestID;j.O.SelectedTestId=await d,this.setState({selectedTestId:await d}),this.setState({isDefectModalOpen:!1}),this.setState({isPageLoading:!1})},this.selectCustomKeyValue=async t=>{var e=await t.target.value;if(await e!==await this.state.selectedValueForCustomKey){j.O.SelectedValueForCustomKey=await e,this.setState({selectedValueForCustomKey:await e});var a=Number(this.state.selectedRowIDforCustomFieldTable)-1,i=this.state.defectCustomField;i[await a].value=await e,j.O.DefectCustomField=await i,this.setState({defectCustomField:[]},(()=>{this.setState({defectCustomField:i})}))}j.O.SelectedRowIDforCustomFieldTable=-1,this.setState({selectedRowIDforCustomFieldTable:-1}),j.O.ListOfCustomValueForKey=[],this.setState({listOfCustomValueForKey:[]}),j.O.SelectedValueForCustomKey="",this.setState({selectedValueForCustomKey:""}),this.setState({modalForCustomFields:!1})},this.selectCustomKeyValueForUpdate=async t=>{var e=[],a=await t.target.value;if(await a!==await this.state.selectedValueForCustomKey){j.O.SelectedValueForCustomKey=await a,this.setState({selectedValueForCustomKey:await a});var i=Number(this.state.selectedRowIDforUpdateCustomFieldTable)-1;(e=this.state.defectUpdateCustomField)[await i].value=await a,j.O.DefectUpdateCustomField=await e,this.setState({isDefectCustomFieldsSame:!1})}j.O.SelectedRowIDforUpdateCustomFieldTable=-1,this.setState({selectedRowIDforUpdateCustomFieldTable:-1}),j.O.ListOfCustomValueForKey=[],this.setState({listOfCustomValueForKey:[]}),j.O.SelectedValueForCustomKey="",this.setState({selectedValueForCustomKey:""}),this.setState({defectUpdateCustomField:[]},(()=>{this.setState({defectUpdateCustomField:e})})),this.setState({modalForUpdateCustomFields:!1})},this.exportDefects=async t=>{await t.preventDefault();var e=this.state.allDefectDetails;if(0===await e.length)return await this.getNotification("error","No Defect found under Defect details table");this.setState({isPageLoading:!0});try{var a=["S.no.","Defect Id","Component","Defect Title","Steps to Reproduce","Priority","Severity","Status","Assigned To","Associated TestId","Test Cycle","Environment","Created By"],i=[],s=await j.O.DefectCustomField;for(let e=0;e<await s.length;e++){var r=await s[e].key;i.push(await r)}var o=[];o=await i.length>0?await a.concat(await i):await a;var l=[];await l.push(await o);var d=1;for(let a=0;a<await e.length;a++){var c=[];c.push(await d);var n,w=await e[a],h=await w.defectid,m=await w.component,u=await w.title,f="",p=await w.priority,S=await w.severity,D=await w.status,v=await w.assignto,O=await w.testid,g=await w.cycle,T="",y=await w.createdby;n=await N.Z.getDefectIdDetailsBasedonDetails(await m,await g,await h);var C=await n.customfields;void 0===await C&&(C=[]);var x=await n.environment;if(void 0!==await x&&await x.length>0){var F="";for(let t=0;t<await x.length;t++){var b=await x[t].value;F=await F+","+await b}await F.startsWith(",")&&(F=await F.slice(1)),T=await F}if(f=await n.defectSteps,void 0!==await f){const t=new DOMParser,e=await t.parseFromString(await f,"text/html"),a=await Array.from(e.body.childNodes).map((t=>(t.nodeType===Node.ELEMENT_NODE?"\n":"")+t.textContent)).join("");f=await a}else f="";if(c.push(await h),c.push(await m),c.push(await u),c.push(await f),c.push(await p),c.push(await S),c.push(await D),c.push(await v),c.push(await O),c.push(await g),c.push(await T),c.push(await y),await i.length>0)for(let t=0;t<await i.length;t++){var P=!1,Z=await i[t];for(let t=0;t<await C.length;t++){var A=await C[t].key;if(await A===await Z){P=!0;var I=await C[t].value;c.push(await I)}}await P||c.push("")}l.push(await c),d=Number(await d)+1}const t=await l,U=J.P6.aoa_to_sheet(t),E=J.P6.book_new();return J.P6.book_append_sheet(E,U,"Defects"),J.NC(E,"QaBunch_Defects.xlsx"),await new Promise((t=>setTimeout(t,3e3))),this.setState({isPageLoading:!1}),await this.getNotification("success","Defects are successfully exported.")}catch(U){return this.setState({isPageLoading:!1}),await this.getNotification("error","There is an error on exporting the test cases "+await U)}},this.uploadExcelWorkBook=async t=>{await t.preventDefault(),await this.setState({bulkUploadFile:await t.target.files[0]})},this.importDefects=async t=>{if(await t.preventDefault(),null===this.state.bulkUploadFile||""===this.state.bulkUploadFile||void 0===this.state.bulkUploadFile)return await this.getNotification("error","Please upload excel file for importing defects.");var e=this.state.bulkUploadFile.name,a=await e.split(".").pop();if("xlsx"!==await a.trim().toLowerCase()&&"csv"!==await a.trim().toLowerCase())return await this.getNotification("error","Please upload excel/csv file , supported version is xlsx or csv");try{var i=null;await(0,Y.ExcelRenderer)(await this.state.bulkUploadFile,((t,e)=>{t||(i=e)}))}catch(H){}var s=await i.rows,r=await i.rows[0];try{var o=await N.Z.getColumnNameIfValid(await r),l=await N.Z.getCustomColumnIndex(await r)}catch(H){return await this.getNotification("error","Excel file worksheet is not in correct format,Please make sure excel column should have Component ,Stepstoreproduce and Title column")}if(!await o.isvalid)return await this.getNotification("error","Excel file worksheet is not in correct format,Please make sure excel column should have Component ,Stepstoreproduce and Title column");var d=await this.state.testCaseTestCycle;if(void 0===await d||""===await d)return await this.getNotification("error","Test cycle is not selected , if there is not cycle, please add from the configuration page.");try{var c=await Number(await o.component),n=await o.title,w=await Number(await o.defectsteps),h=await o.priority,m=await o.severity,u=await o.status,f=await o.assignedto,p=await o.environment,S=await o.linkedtestid,D=await o.createdby,v=0;this.setState({isPageLoading:!0});for(let t=1;t<await s.length;t++){var O=await s[t][c];O=await N.Z.getTextFromHtmlText(await O);var g=await s[t][await n];g=await N.Z.getTextFromHtmlText(await g);var T=await s[t][await w];T=await N.Z.getTextFromHtmlText(await T);var y=await s[t][h];y=await N.Z.getTextFromHtmlText(await y),y=await N.Z.getValidPriority(await y);var C=await s[t][m];C=await N.Z.getTextFromHtmlText(await C),C=await N.Z.getValidSeverity(await C);var x=await s[t][u];x=await N.Z.getTextFromHtmlText(await x),x=await N.Z.getValidDefectStatus(await x);var F=await s[t][f];F=await N.Z.getTextFromHtmlText(await F),F=await N.Z.getValidAssignedTo(await F);var b=await s[t][p];b=await N.Z.getTextFromHtmlText(await b),b=await N.Z.getValidEnvironmentList(await b);var P=await s[t][S];P=await N.Z.getTextFromHtmlText(await P),P=await N.Z.getValidLinkedTestId(await P);var Z=await s[t][D];Z=await N.Z.getTextFromHtmlText(await Z),Z=await N.Z.getCreatedByValid(await Z);var A=await N.Z.getMaxRangeForTestCase(await t,await c,await s.length,await s),j=2;if(await(Number(await A)-1)!==Number(await t)){T="1. "+await T;for(let e=t+1;e<await A;e++){var I=await s[e][w];I=await N.Z.getTextFromHtmlText(await I),void 0!==await I&&""!==await I&&(T=await T+"\n"+await I,j=Number(await j)+1)}}if(T=await T,T="<p>"+await T.split("\n").map((t=>/^\d+\.\s/.test(t)?"<br>"+t.trim():t.trim())).join("</p><p>")+"</p>",void 0!==await O||""!==await O||void 0!==await T||""!==await T||void 0!==await g||""!==await g){var U=1;U=await Number(await U)+1,O=await N.Z.createPathForComponent(await O),await N.Z.createPlaceHolderFromExcelFile(await O);var E=await N.Z.createCustomColumnforImport(await l,await s,await t),k=await N.Z.addNewDefectWithAttribute(await g,await O,await y,await C,await x,await F,await d,await P,await T,await Z,await b,await E);await k&&(v=await(Number(await v)+1))}t=await(Number(await A)-1)}return this.setState({isPageLoading:!1}),Number(await v)>0?await this.getNotification("success",await Number(v)+" Defects imported from the excel file"):await this.getNotification("error","No Defect imported from the excel file, Please make sure you have correct excel template")}catch(H){}},this.toggleaccordian=async()=>{""===await this.state.accordionId?this.setState({accordionId:"1"}):this.setState({accordionId:""})}}render(){const t={mode:"radio",onSelect:this.selectRadioButtonFromAttachmentTable,selected:[this.state.selectedRowFromAttachmentTable]},e={mode:"radio",onSelect:this.selectRadioButtonFromUpdateAttachmentTable,selected:[this.state.updatedRowFromAttachmentTable]},a={onClick:(t,e,a)=>{j.O.DefectUpdateCustomField=[],this.setState({defectUpdateCustomField:[]}),this.setState({updatedRowFromAttachmentTable:-1}),j.O.UpdatedRowFromAttachmentTable=-1,this.setState({isErrorOnUpdatedDefectTitle:!1}),this.setState({isErrorOnTestComment:!1}),this.setState({isPageLoading:!0}),j.O.DefectId=e.defectid,this.setState({defectId:e.defectid}),j.O.UpdatedTestPlaceHolder=e.component,this.setState({updatedTestPlaceHolder:e.component}),j.O.UpdatedTestCycle=e.cycle,this.setState({updatedTestCycle:e.cycle}),Promise.resolve(N.Z.getDefectIdDetails()).then((t=>{if(0===Object.keys(t).length)return this.getNotification("error","Test case does not exist on Server, Please refresh the page and try again.");j.O.UpdatedDefectTitle=t.defectName,this.setState({updatedDefectTitle:t.defectName}),j.O.UpdatedTestPriority=t.priority,this.setState({updatedTestPriority:t.priority}),j.O.UpdateddefectSeverity=t.severity,this.setState({updateddefectSeverity:t.severity}),j.O.UpdatedDefectStatus=t.status,this.setState({updatedDefectStatus:t.status}),j.O.DefectNewAssignee=t.assignedTo,this.setState({defectNewAssignee:t.assignedTo}),j.O.UpdatedTestID=t.testId,this.setState({updatedTestID:t.testId}),this.setState({updatedDefectSteps:t.defectSteps}),j.O.UpdatedDefectSteps=t.defectSteps,this.setState({testHistory:t.History}),j.O.TestHistory=t.History,this.setState({testComments:t.Comments}),j.O.TestComments=t.Comments,this.setState({testCaseCreatedBy:t.createdBy});var e=t.environment;void 0===e?(j.O.UpdatedEnvironment=j.O.FirstEnvironment,this.setState({updatedEnvironment:j.O.FirstEnvironment})):(j.O.UpdatedEnvironment=e,this.setState({updatedEnvironment:e}));var a=t.attachment;void 0===a?(j.O.UpdateAttachmentData=[],this.setState({updateAttachmentData:[]})):(j.O.UpdateAttachmentData=a,this.setState({updateAttachmentData:a}));var i=t.customfields;if(void 0===i){var s=this.state.defectCustomFieldsWithoutValue;void 0===s?(j.O.DefectUpdateCustomField=[],this.setState({defectUpdateCustomField:[]})):Promise.resolve(N.Z.clearvalueForDefectCustomFieldsWithoutValue()).then((()=>{j.O.DefectUpdateCustomField=s,this.setState({defectUpdateCustomField:s}),this.setState({defectCustomFieldsWithoutValue:j.O.DefectCustomFieldsWithoutValue})}))}else Promise.resolve(N.Z.setCustomFieldForExistingDefect(i)).then((t=>{j.O.DefectUpdateCustomField=t,this.setState({defectUpdateCustomField:t})}));this.setState({isDefectModalOpen:!0})})),this.setState({isPageLoading:!1})}},i={toolbar:[[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["code-block"]],clipboard:{matchVisual:!1}},r=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","code-block"];return(0,G.jsxs)(s.Z,{className:"defect",title:"Defect",children:[this.state.isPageLoading&&(0,G.jsx)(L.Z,{sentences:R.b,height:"150%",color:"black"}),(0,G.jsxs)(o.Z,{in:!this.state.isPageLoading,children:[(0,G.jsx)(H(),{ref:this.notificationSystem}),(0,G.jsx)(l.Z,{children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsx)(c.Z,{open:this.state.accordionId,toggle:this.toggleaccordian.bind(this),children:(0,G.jsxs)(n.Z,{children:[(0,G.jsx)(w.Z,{targetId:"1",children:"Upload your existing Defects"}),(0,G.jsx)(h.Z,{accordionId:"1",children:(0,G.jsx)(l.Z,{children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"file",name:"bulkUpload",onChange:this.uploadExcelWorkBook.bind(this)})}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(f.Z,{size:"sm",children:(0,G.jsx)(p.Z,{color:"black",onClick:this.importDefects.bind(this),children:(0,G.jsx)("small",{children:"Import"})})})})]})})})})]})})})}),(0,G.jsxs)(l.Z,{children:[(0,G.jsx)(d.Z,{lg:8,md:8,sm:12,xs:12,children:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(D.Z,{children:(0,G.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Add new defect",(0,G.jsx)(f.Z,{size:"sm",children:(0,G.jsx)(p.Z,{color:"black",onClick:this.createNewDefect.bind(this),children:(0,G.jsx)("small",{children:"Create new defect"})})})]})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(O.Z,{children:(0,G.jsxs)(m.Z,{col:"true",children:[(0,G.jsx)(g.Z,{sm:3,children:"Title*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"input",invalid:this.state.isErrorOnDefectTitle,onChange:this.addNewDefectTitle.bind(this),name:"defectTitle",defaultValue:this.state.defectTitle})}),(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(g.Z,{sm:2,children:"Component*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",invalid:this.state.isErrorOnPlaceHolder,onChange:this.selectPlaceHolder.bind(this),name:"placeHolderName",value:this.state.placeHolderName,children:(0,G.jsx)(B.Z,{options:this.state.listOfPlaceHolder})})}),(0,G.jsx)(g.Z,{sm:2,children:"Priority*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",onChange:this.selectDefectPriority.bind(this),name:"priority",value:this.state.defectPriority,children:(0,G.jsx)(B.Z,{options:this.state.listOfPriorityOptions})})})]}),(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(g.Z,{sm:2,children:"Severity*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",onChange:this.selectDefectSeverity.bind(this),name:"BugSeverity",value:this.state.defectSeverity,children:(0,G.jsx)(B.Z,{options:this.state.listOfSeverity})})}),(0,G.jsx)(g.Z,{sm:2,children:"Status*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",onChange:this.selectDefectStatus.bind(this),name:"automationType",value:this.state.defectStatus,children:(0,G.jsx)(B.Z,{options:this.state.listOfDefectStatus})})})]}),(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(g.Z,{sm:2,children:"Assigned to"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(z.ZP,{defaultValue:this.state.defectAssignedTo,value:this.state.defectAssignedTo,name:"testId",options:this.state.listOfAssignedUsers,className:"basic-single",classNamePrefix:"select",onChange:this.selectEmail.bind(this)})}),(0,G.jsx)(g.Z,{sm:2,children:"Cycle*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",invalid:this.state.isErrorOnTestCycle,onChange:this.selectTestCycle.bind(this),name:"testCycle",value:this.state.testCaseTestCycle,children:(0,G.jsx)(B.Z,{options:this.state.listOfTestCycle})})})]}),(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(g.Z,{sm:2,children:"Environment*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(z.ZP,{defaultValue:this.state.selectedEnvironment,value:this.state.selectedEnvironment,isMulti:!0,name:"testId",options:this.state.environmentList,className:"basic-multi-select",classNamePrefix:"select",onChange:this.selectEnvironment.bind(this)})}),(0,G.jsx)(g.Z,{sm:2,children:"Test Id"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(z.ZP,{defaultValue:this.state.selectedTestId,value:this.state.selectedTestId,isMulti:!0,name:"testId",options:this.state.lisOfTestID,className:"basic-multi-select",classNamePrefix:"select",onChange:this.mapTestCase.bind(this)})})]}),(0,G.jsx)(m.Z,{col:"true",children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(D.Z,{children:(0,G.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:"Custom fields"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(v.Z,{children:(0,G.jsx)(d.Z,{children:(0,G.jsx)(U.Z,{keyField:"id",data:this.state.defectCustomField,columns:M.K7,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,cellEdit:(0,E.ZP)({mode:"click",blurToSave:!0,afterSaveCell:(t,e,a,i)=>{},onStartEdit:(t,e,a,i)=>{var s=t.key,r=t.value;if(j.O.CustomKeyListForListBoxOption.includes(s)){j.O.SelectedRowIDforCustomFieldTable=t.id,this.setState({selectedRowIDforCustomFieldTable:t.id}),j.O.CustomKeyNameToUpdate=s,this.setState({customKeyNameToUpdate:s});var o=j.O.CustomKeyListBoxWithKeyAnaValue[s];j.O.ListOfCustomValueForKey=o,this.setState({listOfCustomValueForKey:o}),j.O.SelectedValueForCustomKey=r,this.setState({selectedValueForCustomKey:r}),this.setState({modalForCustomFields:!0})}}})})})})})]})})}),(0,G.jsxs)(m.Z,{col:"true",children:[(0,G.jsx)(g.Z,{sm:3,children:"Steps to reproduce*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(_(),{modules:i,theme:"snow",formats:r,value:this.state.defectStepsToReproduce,onChange:this.addDefectStepsToRepduce.bind(this)})})]}),(0,G.jsx)(m.Z,{col:"true",children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(D.Z,{children:(0,G.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Additional Attachment",(0,G.jsxs)(f.Z,{size:"sm",children:[(0,G.jsx)(p.Z,{color:"black",onClick:this.handleOpenFileDialog.bind(this),children:(0,G.jsx)("small",{children:"Add"})}),(0,G.jsx)(p.Z,{color:"info",onClick:this.deleteAttachmentFromTable.bind(this),children:(0,G.jsx)("small",{children:"Delete"})})]}),(0,G.jsx)(u.Z,{type:"file",name:"fileUpload",innerRef:this.fileInputRef,onChange:this.uploadAttachment.bind(this),style:{display:"none"}})]})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(v.Z,{children:(0,G.jsx)(d.Z,{children:(0,G.jsx)(U.Z,{keyField:"id",data:this.state.attachmentData,columns:M.p7,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,selectRow:t})})})})]})})})]})})})]})}),(0,G.jsx)(d.Z,{lg:4,md:4,sm:12,xs:12,children:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(D.Z,{children:(0,G.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:"Test Component"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(O.Z,{children:(0,G.jsx)(m.Z,{col:"true",children:(0,G.jsx)(d.Z,{children:(0,G.jsx)(Q.ZP,{cacheSearch:!0,data:this.state.folderTreeData,hasSearch:!0,onClickItem:this.selectPlaceHolderFromTree.bind(this)})})})})})]})})]}),(0,G.jsx)(l.Z,{children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(D.Z,{children:(0,G.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Defect Details",(0,G.jsx)(f.Z,{size:"sm",children:(0,G.jsx)(p.Z,{color:"black",onClick:this.exportDefects.bind(this),children:(0,G.jsx)("small",{children:"Export Defects"})})})]})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(U.Z,{keyField:"id",data:this.state.allDefectDetails,columns:M._U,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,pagination:(0,K.ZP)(),filter:(0,V.ZP)(),rowEvents:a})})]})})}),(0,G.jsxs)(T.Z,{size:"xl",isOpen:this.state.isDefectModalOpen,className:this.props.className,backdrop:"static",children:[(0,G.jsx)(y.Z,{toggle:this.toggleDefectModal.bind(this),children:"Defect Details"}),(0,G.jsxs)(C.Z,{children:[(0,G.jsx)(l.Z,{children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(D.Z,{children:(0,G.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Defect Id : ",this.state.defectId,(0,G.jsxs)(f.Z,{size:"sm",children:[(0,G.jsx)(p.Z,{color:"info",onClick:this.cloneDefect.bind(this),children:(0,G.jsx)("small",{children:"Clone"})}),(0,G.jsx)(p.Z,{color:"black",onClick:this.updateDefect.bind(this),children:(0,G.jsx)("small",{children:"Update"})}),I.Q.isSuperAdmin&&(0,G.jsx)(p.Z,{color:"info",onClick:this.confirmdelete.bind(this),children:(0,G.jsx)("small",{children:"Delete"})})]})]})}),(0,G.jsx)(v.Z,{children:(0,G.jsxs)(O.Z,{children:[(0,G.jsxs)(m.Z,{col:"true",children:[(0,G.jsx)(g.Z,{sm:3,children:"Title*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{invalid:this.state.isErrorOnUpdatedDefectTitle,type:"input",name:"updatedDefectTitle",defaultValue:this.state.updatedDefectTitle,onChange:this.updateDefectTitle.bind(this)})})]}),(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(g.Z,{sm:2,children:"Component*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"input",name:"updatedplaceholder",defaultValue:this.state.updatedTestPlaceHolder,disabled:!0})}),(0,G.jsx)(g.Z,{sm:2,children:"Priority*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",name:"updatedpriority",value:this.state.updatedTestPriority,onChange:this.updateTestPriority.bind(this),children:(0,G.jsx)(B.Z,{options:this.state.listOfPriorityOptions})})})]}),(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(g.Z,{sm:2,children:"Severity*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",onChange:this.updateDefectSeverity.bind(this),name:"BugSeverity",value:this.state.updateddefectSeverity,children:(0,G.jsx)(B.Z,{options:this.state.listOfSeverity})})}),(0,G.jsx)(g.Z,{sm:2,children:"Status*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",onChange:this.updateDefectStatus.bind(this),name:"automationType",value:this.state.updatedDefectStatus,children:(0,G.jsx)(B.Z,{options:this.state.listOfDefectStatus})})})]}),(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(g.Z,{sm:2,children:"Assigned to"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(z.ZP,{defaultValue:this.state.defectNewAssignee,name:"testId",options:this.state.listOfAssignedUsers,className:"basic-single",classNamePrefix:"select",onChange:this.updateEmail.bind(this)})}),(0,G.jsx)(g.Z,{sm:2,children:"Cycle*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"input",name:"testCycle",defaultValue:this.state.updatedTestCycle,disabled:!0})})]}),(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(g.Z,{sm:2,children:"Environment*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(z.ZP,{defaultValue:this.state.updatedEnvironment,isMulti:!0,name:"testId",options:this.state.environmentList,className:"basic-multi-select",classNamePrefix:"select",onChange:this.updateEnvironment.bind(this)})}),(0,G.jsx)(g.Z,{sm:2,children:"Test Id"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(z.ZP,{defaultValue:this.state.updatedTestID,isMulti:!0,name:"testId",options:this.state.lisOfTestID,className:"basic-multi-select",classNamePrefix:"select",onChange:this.mapUpdatedTestCase.bind(this)})})]}),(0,G.jsx)(m.Z,{col:"true",children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(D.Z,{children:(0,G.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:"Custom fields"})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(v.Z,{children:(0,G.jsx)(d.Z,{children:(0,G.jsx)(U.Z,{keyField:"id",data:this.state.defectUpdateCustomField,columns:M.K7,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,cellEdit:(0,E.ZP)({mode:"click",blurToSave:!0,afterSaveCell:(t,e,a,i)=>{t!==e&&this.setState({isDefectCustomFieldsSame:!1})},onStartEdit:(t,e,a,i)=>{var s=t.key,r=t.value;if(j.O.CustomKeyListForListBoxOption.includes(s)){j.O.ListOfCustomValueForKey=[],this.setState({listOfCustomValueForKey:[]}),j.O.SelectedRowIDforUpdateCustomFieldTable=t.id,this.setState({selectedRowIDforUpdateCustomFieldTable:t.id}),j.O.CustomKeyNameToUpdate=s,this.setState({customKeyNameToUpdate:s});var o=j.O.CustomKeyListBoxWithKeyAnaValue[s];j.O.SelectedValueForCustomKey=r,o.includes(r)||o.splice(0,0,r),j.O.ListOfCustomValueForKey=o,this.setState({listOfCustomValueForKey:o}),this.setState({selectedValueForCustomKey:r}),this.setState({modalForUpdateCustomFields:!0})}}})})})})})]})})}),(0,G.jsxs)(m.Z,{col:"true",children:[(0,G.jsx)(g.Z,{sm:3,children:"Steps to reproduce*"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(_(),{theme:"snow",modules:i,formats:r,value:this.state.updatedDefectSteps,onChange:this.updateDefectStepsToReproduce.bind(this)})})]}),(0,G.jsx)(m.Z,{col:"true",children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(D.Z,{children:(0,G.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:["Additional Attachment",(0,G.jsxs)(f.Z,{size:"sm",children:[(0,G.jsx)(p.Z,{color:"black",onClick:this.handleOpenUpdateFileDialog.bind(this),children:(0,G.jsx)("small",{children:"Add"})}),(0,G.jsx)(p.Z,{color:"info",onClick:this.downloadFileFromServer.bind(this),children:(0,G.jsx)("small",{children:"Download"})}),(0,G.jsx)(p.Z,{color:"black",onClick:this.deleteUpdateAttachmentFromTable.bind(this),children:(0,G.jsx)("small",{children:"Delete"})})]}),(0,G.jsx)(u.Z,{type:"file",name:"fileUpload",innerRef:this.fileUpdateInputRef,onChange:this.uploadUpdateAttachment.bind(this),style:{display:"none"}})]})}),(0,G.jsx)(v.Z,{children:(0,G.jsx)(v.Z,{children:(0,G.jsx)(d.Z,{children:(0,G.jsx)(U.Z,{keyField:"id",data:this.state.updateAttachmentData,columns:M.p7,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0,selectRow:e})})})})]})})})]})})]})})}),(0,G.jsx)(l.Z,{children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsxs)("div",{children:[(0,G.jsxs)(x.Z,{tabs:!0,children:[(0,G.jsx)(F.Z,{children:(0,G.jsx)(b.Z,{className:this.state.classNameForComment,onClick:this.clickOnCommentsTab.bind(this),children:"Comments"})}),(0,G.jsx)(F.Z,{children:(0,G.jsx)(b.Z,{className:this.state.classNameForHistory,onClick:this.clickOnHistoryTab.bind(this),children:"History"})})]}),(0,G.jsxs)(P.Z,{activeTab:this.state.activeTab,children:[(0,G.jsxs)(Z.Z,{tabId:"1",children:[(0,G.jsx)(l.Z,{children:(0,G.jsx)(d.Z,{sm:"12",children:(0,G.jsx)(U.Z,{keyField:"id",data:this.state.testComments,columns:M.mL,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0})})}),(0,G.jsx)(l.Z,{children:(0,G.jsx)(O.Z,{children:(0,G.jsxs)(m.Z,{row:!0,children:[(0,G.jsx)(g.Z,{sm:1,children:"Comment"}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"textarea",invalid:this.state.isErrorOnTestComment,name:"testCaseComment",defaultValue:this.state.newTestCaseComment,onChange:this.addTestComment.bind(this)})}),(0,G.jsx)(d.Z,{children:(0,G.jsx)(f.Z,{size:"sm",children:(0,G.jsx)(p.Z,{color:"black",onClick:this.saveTestComment.bind(this),children:(0,G.jsx)("small",{children:"Add Comment"})})})})]})})})]}),(0,G.jsx)(Z.Z,{tabId:"2",children:(0,G.jsx)(l.Z,{children:(0,G.jsx)(d.Z,{sm:"12",children:(0,G.jsx)(U.Z,{keyField:"id",data:this.state.testHistory,columns:M.fP,wrapperClasses:"table-responsive",striped:!0,hover:!0,condensed:!0})})})})]})]})})})]})]}),(0,G.jsxs)(T.Z,{isOpen:this.state.modalForDelete,toggle:this.toggle,className:this.props.className,children:[(0,G.jsx)(y.Z,{toggle:this.toggleDeleteModal,children:"Confirmation"}),(0,G.jsx)(C.Z,{children:"Are you sure,You want to delete the defect?"}),(0,G.jsx)(A.Z,{children:(0,G.jsxs)(f.Z,{size:"sm",children:[(0,G.jsx)(p.Z,{color:"black",onClick:this.toggleDeleteModal.bind(this),children:(0,G.jsx)("small",{children:"Cancel"})}),(0,G.jsx)(p.Z,{color:"info",onClick:this.deleteDefectId.bind(this),children:(0,G.jsx)("small",{children:"Yes"})})]})})]}),(0,G.jsxs)(T.Z,{isOpen:this.state.modalForCustomFields,toggle:this.toggle,className:this.props.className,centered:!0,children:[(0,G.jsxs)(y.Z,{toggle:this.toggleCustomField,children:["Choose value for custom key : ",this.state.customKeyNameToUpdate," "]}),(0,G.jsx)(C.Z,{children:(0,G.jsx)(l.Z,{children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsx)(O.Z,{children:(0,G.jsx)(m.Z,{col:"true",children:(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",onChange:this.selectCustomKeyValue.bind(this),name:"customKeySelection",value:this.state.selectedValueForCustomKey,children:(0,G.jsx)(B.Z,{options:this.state.listOfCustomValueForKey})})})})})})})})]}),(0,G.jsxs)(T.Z,{isOpen:this.state.modalForUpdateCustomFields,toggle:this.toggle,className:this.props.className,centered:!0,children:[(0,G.jsxs)(y.Z,{toggle:this.toggleUpdateCustomField,children:["Update value for custom key : ",this.state.customKeyNameToUpdate," "]}),(0,G.jsx)(C.Z,{children:(0,G.jsx)(l.Z,{children:(0,G.jsx)(d.Z,{lg:12,md:12,sm:12,xs:12,children:(0,G.jsx)(O.Z,{children:(0,G.jsx)(m.Z,{col:"true",children:(0,G.jsx)(d.Z,{children:(0,G.jsx)(u.Z,{type:"select",onChange:this.selectCustomKeyValueForUpdate.bind(this),name:"customKeySelection",value:this.state.selectedValueForCustomKey,children:(0,G.jsx)(B.Z,{options:this.state.listOfCustomValueForKey})})})})})})})})]})]})]})}}const $=X;i()}catch(X){i(X)}}),1)}}]);